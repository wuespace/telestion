{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Telestion Developer Documentation","text":"<p>Telestion is a framework for building telemetry applications. You can find more information about the project on the project website.</p> <p>This documentation is about developing a Ground Station software using Telestion. For end-user documentation, please ask your Telestion developer.</p> <p>Get started</p>"},{"location":"#quick-links","title":"Quick links","text":""},{"location":"#github-repositories","title":"GitHub repositories","text":"<ul> <li> Telestion \u2013 The main repository for the Telestion project</li> <li> Telestion Architecture \u2013 The repository that hosts the ADRs (Architecture Decision Records) for the Telestion project</li> </ul>"},{"location":"#related-projects","title":"Related projects","text":"<ul> <li>NATS \u2013 The message bus used by Telestion</li> <li>TypeScript \u2013 The programming language used for most components by Telestion</li> <li>Deno \u2013 The runtime used by Telestion for TypeScript and JavaScript based services</li> <li>React \u2013 The frontend framework used by Telestion</li> </ul>"},{"location":"#discord","title":"Discord","text":"<p>The Telestion Discord server is the best place to interact with the Telestion community. You can ask questions, get help, and discuss the project with other users and developers.</p> <p> Join the Discord server</p>"},{"location":"getting-started/","title":"Getting started","text":"<p>(coming soon)</p>"},{"location":"message-bus/","title":"Message Bus","text":"<p>The message bus is a simple, lightweight, and fast way to send messages between different parts (services) of your application. It\u2019s a publish/subscribe system that allows you to send messages to a specific subject and have any listeners on that subject receive the message.</p>"},{"location":"message-bus/#messages","title":"Messages","text":"<p>Messages are the way that data is sent between services. In the Telestion ecosystem. Messages are either JSON or binary data.</p>"},{"location":"message-bus/#subjects","title":"Subjects","text":"<p>Subjects are the way that messages are sent between services. Each subject has a name. The name is used to identify the subject.</p>"},{"location":"message-bus/#publish-subscribe","title":"Publish / Subscribe","text":"<p>The message bus is a publish/subscribe system. This means that you can publish messages to a specific subject and have any listeners on that subject receive the message.</p> <p>Warning</p> <p>Messages aren\u2019t stored when using the publish/subscribe method. This means that if a service isn\u2019t listening on a subject when a message gets published, it won\u2019t receive the message.</p> <p>If you need to ensure that a message is received, you can use the Request / Reply system to await confirmation.</p>"},{"location":"message-bus/#example","title":"Example","text":"<p>Here is an example of how the publish/subscribe system works:</p> <pre><code>sequenceDiagram\n    accTitle: Sequence diagram of the publish/subscribe system. Text description in collapsed section below.\n    participant Service A\n    participant Message Bus\n    participant Service B\n    Service A-&gt;&gt;Message Bus: Subscribe to subject \"test\"\n    Service B-&gt;&gt;Message Bus: Publish message \"Hello World\" to subject \"test\"\n    Message Bus-&gt;&gt;Service A: Message \"Hello World\" on subject \"test\"</code></pre> Text Description <ol> <li>Service A subscribes to the subject \u201ctest\u201d on the message bus</li> <li>Service B publishes the message \u201cHello World\u201d to the subject \u201ctest\u201d</li> <li>The message bus sends the message \u201cHello World\u201d to Service A</li> </ol>"},{"location":"message-bus/#request-reply","title":"Request / Reply","text":"<p>The message bus is also a request/reply system. This means that you can send a request to a specific subject and have any listeners on that subject reply to the request.</p>"},{"location":"message-bus/#example_1","title":"Example","text":"<p>Here is an example of how the request/reply system works:</p> <pre><code>sequenceDiagram\n    accTitle: Sequence diagram of the request/reply system. Text description in collapsed section below.\n    participant Service A\n    participant Message Bus\n    participant Service B\n    Service B-&gt;&gt;Message Bus: Subscribe to subject \"test\"\n    Service A-&gt;&gt;Message Bus: Send request \"Hello World\" to subject \"test\"\n    Message Bus-&gt;&gt;Service B: Request \"Hello World\" on subject \"test\"\n    Service B-&gt;&gt;Message Bus: Reply \"Hello World\" to subject \"test\"\n    Message Bus-&gt;&gt;Service A: Reply \"Hello World\" on subject \"test\"</code></pre> Text Description <ol> <li>Service B subscribes to the subject \u201ctest\u201d on the message bus</li> <li>Service A sends the request \u201cHello World\u201d to the subject \u201ctest\u201d</li> <li>The message bus sends the request \u201cHello World\u201d to Service B</li> <li>Service B replies to the request with \u201cHello World\u201d</li> <li>The message bus sends the reply \u201cHello World\u201d to Service A</li> </ol>"},{"location":"message-bus/#nats","title":"NATS","text":"<p>We use NATS as our message bus. While all other services can be replaced, the message bus is a core component of Telestion. It is the backbone of the entire system.</p>"},{"location":"message-bus/#authentication-and-authorization","title":"Authentication and Authorization","text":"<p>NATS also handles everything related to authentication and authorization for the message bus. You can easily control who can send and receive messages on which subjects.</p>"},{"location":"project-folder-structure/","title":"Project folder structure","text":"<p>Every Telestion project is different, and so is its folder structure. Some projects might not even have a frontend and write every backend service in Java, while others might have a frontend and use Deno for their backend services.</p> <p>That\u2019s not very helpful, is it? So, let\u2019s take a look at a folder structure that is suitable for most projects. Note that as your project grows, you might want to change the structure to better suit your needs. But you will know when the time has come.</p>"},{"location":"project-folder-structure/#version-control","title":"Version control","text":"<p>The first thing you should do is to create a new Git repository. This repository will contain all the code for your project. You can use GitHub, GitLab, or any other Git hosting service you like.</p>"},{"location":"project-folder-structure/#recommended-folder-structure","title":"Recommended folder structure","text":"<p>The following folder structure is recommended for most projects:</p> <ul> <li> <code>backend-deno</code> - A folder that contains all backend services written in Deno.<ul> <li> <code>[service-name]</code> - A folder that contains a backend service written in Deno.<ul> <li> <code>mod.ts</code> - The entry point of the backend service.</li> <li> <code>README.md</code> - A file that contains information about the backend service.</li> </ul> </li> <li> <code>Dockerfile</code> - A Dockerfile for the Deno-based backend services, if you want to use Docker.</li> </ul> </li> <li> <code>frontend-react</code> - A folder that contains the frontend written in React.<ul> <li> <code>package.json</code> - The frontend application\u2019s <code>package.json</code> file.</li> <li>\u2026</li> </ul> </li> <li> <code>frontend-cli</code> - A folder that contains the CLI frontend written in Deno.<ul> <li> <code>mod.ts</code> - The entry point of the CLI.</li> <li> <code>README.md</code> - A file that contains information about the CLI.</li> </ul> </li> <li> <code>nats</code> - A folder that contains the NATS server configuration.<ul> <li> <code>nats-server.conf</code> - The configuration file for the NATS server.</li> </ul> </li> <li> <code>docker-compose.yml</code> - A Docker Compose file that contains the configuration for the Docker containers.</li> <li> <code>README.md</code> - A file that contains information about the project.</li> </ul>"},{"location":"project-folder-structure/#alternatives","title":"Alternatives","text":"<p>There are also other options how you could structure your project. For example, if you have completely distinct groups of services that are not related to each other, you could create a folder for each group, and differentiate between programming languages used under these groups.</p> <p>However, to get started, the above structure should be sufficient. You can always change it later.</p>"},{"location":"service/","title":"Services","text":"<p>Services are small, self-contained, and (ideally) stateless applications that can be deployed and scaled independently. They\u2019re designed to be used in conjunction with other services and are often packaged together to form a larger application.</p> <p>In less abstract terms, a service is a single application that is part of the bigger Telestion application. It is a single application that is responsible for a single task. For example, the project template contains the following services by default:</p> <ul> <li>Frontend: A web application that is responsible for displaying the user interface</li> <li>Database Service: A service that is responsible for storing data</li> <li>Database Query Service: A service that is responsible for querying the database</li> <li>Data Splitter Service: A service that is responsible for creating mock data to test the application</li> </ul>"},{"location":"service/#service-types","title":"Service Types","text":"<p>There are two types of services:</p> <ul> <li>Frontend Services: Services that are responsible for displaying the user interface</li> <li>Backend Services: Services that are responsible for processing data</li> </ul> <p>Info</p> <p>Concretely, the main difference between frontend and backend is that frontend services act on behalf of the user, while backend services act on behalf of the system.</p>"},{"location":"service/#service-architecture","title":"Service Architecture","text":"<p>While similar to the common microservice architecture, Telestion is less strict about its services. For example, Telestion services are not required to be stateless. While state in services makes it harder to scale them, it also makes it easier to develop them.</p> <p>Telestion services are also not required to be deployed independently. They can be deployed together as a single application.</p>"},{"location":"service/#service-communication","title":"Service Communication","text":"<p>Telestion services communicate via the NATS message bus. This means that they can send messages to each other and receive messages from each other. This allows them to communicate with each other without having to know each other\u2019s IP addresses or ports.</p>"},{"location":"Backend%20Development/","title":"Developing Backend Services","text":"<p>Backend services are small, self-contained, and (ideally) stateless applications that can be deployed and scaled independently. They are designed to be used in conjunction with other services and are often packaged together to form a larger application.</p>","tags":["Backend"]},{"location":"Backend%20Development/#example-structure","title":"Example Structure","text":"<p>The following is an example for the combination of services creating the backend of a Telestion application:</p> <pre><code>graph TB\n    accTitle: Diagram showcasing the structure of an exemplary Telestion backend. Text description in collapsible section below.\n    db[Database]\n    md[Mission Device]\n    subgraph Backend\n        io[IO Service]\n        tmps[Telemetry Parser Service]\n        tcs[Telecommand Service]\n        dbs[Database Writer Service]\n        dbqs[Database Query Service]\n    end\n    subgraph Frontend\n        wc[Web Client]\n    end\n    md &lt;---&gt; io\n    io --&gt; tmps\n    tmps --&gt; dbs\n    dbs --&gt; db\n    wc --&gt; dbqs\n    dbqs --&gt; db\n    wc --&gt; tcs\n    tcs --&gt; io</code></pre> Text Description <ol> <li>The Mission Device sends telemetry data to the IO Service.</li> <li>The IO Service (backend) forwards the telemetry data to the Telemetry Parser Service.</li> <li>The Telemetry Parser Service (backend) parses the telemetry data and writes it to the database via the Database Writer Service.</li> <li>The Database Writer Service (backend) writes the telemetry data to the database.</li> <li>The Web Client (frontend) queries the database via the Database Query Service.</li> <li>The Database Query Service (backend) queries the database and returns the data to the Web Client.</li> <li>The Web Client (frontend) sends telecommands to the Telecommand Service. </li> <li>The Telecommand Service forwards the telecommands to the IO Service.</li> <li>The IO Service sends the telecommands to the Mission Device.</li> </ol>","tags":["Backend"]},{"location":"Backend%20Development/#getting-started","title":"Getting Started","text":"<p>The most common way to write a backend service is to use TypeScript.</p> <p>Get started writing a backend service in TypeScript </p> <p>However, for some use cases, it may be necessary to write a backend service in other languages.</p> <p>You can even write a backend service in any language you want. The only requirement is that it can communicate with the NATS message bus. To learn how to write a service in other languages, see Using other languages.</p>","tags":["Backend"]},{"location":"Backend%20Development/other-languages/","title":"Using other languages","text":"<p>You can use any language you want to write your backend. The only requirement is that it can communicate with the NATS message bus.</p>","tags":["Backend"]},{"location":"Backend%20Development/other-languages/#implementation-requirements","title":"Implementation Requirements","text":"<p>The only technical requirement for a backend service is that it can communicate with the NATS message bus. This means that it must be able to send and receive messages on the message bus.</p> <p>However, there are some additional standards that you should follow to make your service easier to use (and compliant with the Telestion ecosystem):</p>","tags":["Backend"]},{"location":"Backend%20Development/other-languages/#deployment","title":"Deployment","text":"<p>Your service should be deployable as both a Docker container and as an executable. This makes it easier to deploy and scale your service.</p>","tags":["Backend"]},{"location":"Backend%20Development/other-languages/#configuration","title":"Configuration","text":"<p>Your service should be configurable via environment variables.</p> <p>Every Telestion service receives at least the following environment variables:</p> <ul> <li><code>NATS_URL</code>: The URL of the NATS server</li> <li><code>NATS_USER</code>: The username of the NATS user</li> <li><code>NATS_PASSWORD</code>: The password of the NATS user</li> <li><code>SERVICE_NAME</code>: The name of the service. This is used to create a unique queue group for your service. See Queues for more information.</li> <li><code>DATA_DIR</code>: The path to the data directory. This is where your service should store any data it needs to persist. This is shared between multiple services. To ensure that your service doesn\u2019t overwrite data from other services, you should create a subdirectory for your service.</li> </ul> <p>If your service doesn\u2019t receive any of these environment variables, it should exit with a non-zero exit code.</p> <p>Warning</p> <p>There can be multiple instances of a service with the same name running at the same time. They are guaranteed to have the same configuration. If you need a truly unique identifier, you can combine the <code>SERVICE_NAME</code> and the process ID.</p>","tags":["Backend"]},{"location":"Backend%20Development/other-languages/#logging","title":"Logging","text":"<p>Your service should log any \u201cfeedback\u201d to <code>stdout</code> and <code>stderr</code>.</p>","tags":["Backend"]},{"location":"Backend%20Development/other-languages/#queues","title":"Queues","text":"<p>NATS allows you to create queue groups. This means that you can have multiple instances of the same service running, and they\u2019ll share the messages they receive.</p> <p>If you want to use this feature, you should use the <code>SERVICE_NAME</code> environment variable to create a unique queue group for your service.</p>","tags":["Backend"]},{"location":"Backend%20Development/other-languages/#message-body","title":"Message Body","text":"<p>Your message must be able to handle, without crashing, the following types of messages:</p> <ul> <li>JSON-encoded UTF-8 strings</li> <li>Binary data</li> </ul> <p>Your service mustn\u2019t assume anything about the format or content of the message body. It must be able to handle any message body of the two types.</p>","tags":["Backend"]},{"location":"Backend%20Development/other-languages/#health-checks","title":"Health Checks","text":"<p>Your service should provide a health check feature on the message bus subject <code>__telestion__/health</code>. This allows other services to check if your service is still running.</p> <p>While running, any Telestion service should respond (within 0.5 seconds) to requests on the <code>__telestion__/health</code> subject with a message containing the following JSON-encoded information:</p> <pre><code>{\n    \"errors\": 0, // or number of \"recent\" errors\n    \"name\": \"My Service\" // the SERVICE_NAME\n}\n</code></pre>","tags":["Backend"]},{"location":"Backend%20Development/other-languages/#service-behavior-specification","title":"Service Behavior Specification","text":"<p>A formal description of the behavior of a Telestion service is provided in the Service Behavior Specification. It can be used to test libraries for writing Telestion services in other languages.</p>","tags":["Backend"]},{"location":"Backend%20Development/rust/","title":"Writing a Backend Service in Rust","text":"","tags":["Backend","Rust"]},{"location":"Backend%20Development/rust/#prerequisites","title":"Prerequisites","text":"<ul> <li>Rust</li> <li>Cargo</li> <li>NATS server</li> <li>NATS client</li> <li>Tokio</li> </ul>","tags":["Backend","Rust"]},{"location":"Backend%20Development/rust/#connecting-to-the-message-bus","title":"Connecting to the Message Bus","text":"<pre><code>use nats::asynk::Connection;\nuse std::error::Error;\n\n#[tokio::main]\nasync fn main() -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {\n    let nc = Connection::new(\"nats://localhost:4222\").await?;\n    let sub = nc.subscribe(\"bar\")?.with_handler(move |msg| {\n        println!(\"Received {}\", &amp;msg);\n        Ok(())\n    });\n\n    Ok(())\n}\n</code></pre>","tags":["Backend","Rust"]},{"location":"Backend%20Development/rust/#getting-configuration-from-the-environment","title":"Getting configuration from the environment","text":"<pre><code>[dependencies]\ndotenv = \"0.15.0\"\n</code></pre> <pre><code>use dotenv::dotenv;\nuse std::env;\n\n#[tokio::main]\nasync fn main() -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {\n    dotenv().ok();\n\n    let nats_url = env::var(\"NATS_URL\")?;\n    let nc = Connection::new(nats_url).await?;\n\n    Ok(())\n}\n</code></pre>","tags":["Backend","Rust"]},{"location":"Backend%20Development/service-behavior/","title":"Service Behavior Specification","text":"<p>Telestion services can be written in any language that supports the NATS protocol.</p> <p>While there can be differences in the implementation, there are some things that all Telestion services should have in common. This includes, among other things, the configuration of services, allowing seamless deployment of services written in different languages.</p>"},{"location":"Backend%20Development/service-behavior/#gherkin","title":"Gherkin","text":"<p>To specify these common behaviors, we use Gherkin. Gherkin is a language that is used to specify the behavior of software in a human-readable way while still being executable, meaning that tests can be automated.</p> <p>They are based on examples and should be written in a way that is independent of the implementation language.</p> <p>The Gherkin files are located in the <code>backend-features</code> directory of the Telestion project.</p>"},{"location":"Backend%20Development/service-behavior/#documentation","title":"Documentation","text":"<p>The Gherkin files get converted to Markdown files that are then included in the documentation.</p>"},{"location":"Backend%20Development/service-behavior/#testing","title":"Testing","text":""},{"location":"Backend%20Development/service-behavior/#architecture","title":"Architecture","text":"<pre><code>graph TD\n    R[Test Runner]\n    subgraph Docker\n        T[Testbed Container]\n        N[NATS Container]\n        T --- W[Network] -- Host: nats --- N\n    end\n    NC[Temporary NATS Config File]\n    NC -- mounted into --- N\n    R -- writes --&gt; NC\n    R -- runs --&gt; T\n    T -- result --&gt; R\n    R -- controls containers of --&gt; W\n    R -- starts/restarts --&gt; N</code></pre> <pre><code>graph LR\n    I[Testbed Image]\n    R[Test Runner]\n    subgraph Docker \n        C[Testbed Container]\n    end\n    R -- builds --&gt; I\n    R -- runs --&gt; C\n    C -- result --&gt; R\n    C -- is based on --&gt; I</code></pre>"},{"location":"Backend%20Development/service-behavior/#natively","title":"Natively","text":"<p>Create the Python virtual environment with the helper script:</p> <pre><code>./tools/setup-venv.sh\n</code></pre> <p>Source the virtual environment:</p> <pre><code>. .venv/bin/activate\n</code></pre> <p>Run the tests with:</p> <pre><code>./run-tests.py ./sample-service\n</code></pre> <p>[!NOTE] You can also run the tests from any other directory.</p> <p>[!NOTE] Run <code>./run-tests.py --help</code> for more options, such as verbose output.</p>"},{"location":"Backend%20Development/service-behavior/auth/","title":"NATS authentication","text":""},{"location":"Backend%20Development/service-behavior/auth/#background-a-nats-server-with-authentication-is-running-on-nats4222","title":"Background (A NATS server with authentication is running on \u201cnats:4222\u201d)","text":"<p>Given I have the basic service configuration</p> <p>And I have a NATS server running on \u201cnats:4222\u201d</p> <p>And the NATS server requires authentication</p> <p>And \u201cnats\u201d is a NATS user with password \u201cpassword\u201d.</p>"},{"location":"Backend%20Development/service-behavior/auth/#starting-the-service-with-valid-credentials","title":"Starting the service with valid credentials","text":"<p>Given I have an environment variable named \u201cNATS_URL\u201d with value \u201cnats:4222\u201d</p> <p>And I have an environment variable named \u201cNATS_USER\u201d with value \u201cnats\u201d</p> <p>And I have an environment variable named \u201cNATS_PASSWORD\u201d with value \u201cpassword\u201d</p> <p>When I start the service</p> <p>Then the service should start</p> <p>And the service should connect to NATS.</p>"},{"location":"Backend%20Development/service-behavior/auth/#starting-the-service-with-invalid-credentials-fails","title":"Starting the service with invalid credentials fails","text":"<p>Given I have an environment variable named \u201cNATS_URL\u201d with value \u201cnats:4222\u201d</p> <p>And I have an environment variable named \u201cNATS_USER\u201d with value \u201cnats\u201d</p> <p>And I have an environment variable named \u201cNATS_PASSWORD\u201d with value \u201cwrong\u201d</p> <p>When I start the service</p> <p>Then the service should fail to start.</p>"},{"location":"Backend%20Development/service-behavior/auth/#starting-the-service-without-credentials-fails-when-the-authentication-is-required","title":"Starting the service without credentials fails when the authentication is required","text":"<p>Given I have an environment variable named \u201cNATS_URL\u201d with value \u201cnats:4222\u201d</p> <p>When I start the service</p> <p>Then the service should fail to start.</p>"},{"location":"Backend%20Development/service-behavior/auth/#starting-the-service-fails-when-the-nats-server-is-offline","title":"Starting the service fails when the NATS server is offline","text":"<p>Given I have an environment variable named \u201cNATS_URL\u201d with value \u201cnats:4222\u201d</p> <p>And I have an environment variable named \u201cNATS_USER\u201d with value \u201cnats\u201d</p> <p>And I have an environment variable named \u201cNATS_PASSWORD\u201d with value \u201cpassword\u201d</p> <p>And the NATS server is offline</p> <p>When I start the service</p> <p>Then the service should fail to start.</p>"},{"location":"Backend%20Development/service-behavior/config/","title":"Service Configuration","text":""},{"location":"Backend%20Development/service-behavior/config/#services-can-be-configured-through-environment-variables","title":"Services can be configured through environment variables","text":"<p>The most common way to configure services is through environment variables.   Environment variables are easy to use and can be set in a variety of ways.   They are also easy to overwrite when running services locally.</p> <p>Given I have the basic service configuration</p> <p>And I have an environment variable named \u201cTEST\u201d with value \u201c1\u201d</p> <p>When I start the service without NATS</p> <p>Then the service should be configured with \u201cTEST\u201d set to \u201c1\u201d.</p>"},{"location":"Backend%20Development/service-behavior/config/#services-can-be-configured-through-cli-arguments","title":"Services can be configured through CLI arguments","text":"<p>Sometimes it is useful to configure services through CLI arguments.   CLI arguments are easy to use and can be set when running services locally.</p> <p>Given I have the basic service configuration</p> <p>When I start the service with \u201c\u2013TEST=1\u201d without NATS</p> <p>Then the service should be configured with \u201cTEST\u201d set to \u201c1\u201d.</p>"},{"location":"Backend%20Development/service-behavior/config/#trying-to-run-services-without-providing-the-required-configuration-fails","title":"Trying to run services without providing the required configuration fails","text":"<p>There are some configuration values that are required for services to run.   If these values are not provided, the service should fail to start.   - <code>NATS_URL</code> - to connect to NATS   - <code>SERVICE_NAME</code> - to group services in NATS when subscribing with multiple instances   - <code>DATA_DIR</code> - a directory where the service is free to store persistent data</p> <p>During development, it is possible to use the development mode so you don\u2019t have to provide these values. However, this is not recommended for production.</p> <p>Given I have no service configuration</p> <p>When I start the service</p> <p>Then the service should fail to start.</p>"},{"location":"Backend%20Development/service-behavior/config/#cli-arguments-overwrite-environment-variables","title":"CLI arguments overwrite environment variables","text":"<p>To make it easy to overwrite configuration values when running services locally, CLI arguments should overwrite environment variables.</p> <p>Given I have the basic service configuration</p> <p>And I have an environment variable named \u201cTEST\u201d with value \u201c1\u201d</p> <p>When I start the service with \u201c\u2013TEST=2\u201d without NATS</p> <p>Then the service should be configured with \u201cTEST\u201d set to \u201c2\u201d.</p>"},{"location":"Backend%20Development/service-behavior/dev-mode/","title":"Development mode","text":""},{"location":"Backend%20Development/service-behavior/dev-mode/#the-service-can-be-started-in-dev-mode-to-use-default-parameters-during-development","title":"The service can be started in dev mode to use default parameters during development","text":"<p>During development, it is useful to start the service with default parameters, so that it can be used without any configuration.</p> <p>Given I have no service configuration</p> <p>When I start the service with \u201c\u2013dev\u201d without NATS</p> <p>Then the service should start</p> <p>And the service should be configured with \u201cNATS_URL\u201d set to \u201clocalhost:4222\u201d</p> <p>And the service should be configured with \u201cNATS_USER\u201d set to \u201cundefined\u201d</p> <p>And the service should be configured with \u201cNATS_PASSWORD\u201d set to \u201cundefined\u201d.</p>"},{"location":"Backend%20Development/service-behavior/dev-mode/#any-custom-configuration-overwrites-dev-mode-parameters","title":"Any custom configuration overwrites dev mode parameters","text":"<p>Given I have no service configuration</p> <p>And I have a NATS server running on \u201cnats:4255\u201d</p> <p>And I have an environment variable named \u201cNATS_URL\u201d with value \u201cnats:4255\u201d</p> <p>When I start the service with \u201c\u2013dev \u2013DATA_DIR=/tmp\u201d</p> <p>Then the service should start</p> <p>And the service should connect to NATS</p> <p>And the service should be configured with \u201cDATA_DIR\u201d set to \u201c/tmp\u201d</p> <p>And the service should be configured with \u201cNATS_URL\u201d set to \u201cnats:4255\u201d.</p>"},{"location":"Backend%20Development/service-behavior/nats/","title":"NATS Integration in Services","text":""},{"location":"Backend%20Development/service-behavior/nats/#background-a-nats-server-is-running-on-nats4222","title":"Background (A NATS server is running on \u201cnats:4222\u201d)","text":"<p>Given I have a NATS server running on \u201cnats:4222\u201d.</p>"},{"location":"Backend%20Development/service-behavior/nats/#the-service-has-access-to-the-nats-client-after-startup","title":"The service has access to the NATS client after startup","text":"<p>The service should be able to access the NATS client after startup. This enables service developers to use the NATS client to publish and subscribe to messages.</p> <p>Given I have the basic service configuration</p> <p>When I start the service</p> <p>Then the service should connect to NATS</p> <p>And the NATS connection API should be available to the service.</p>"},{"location":"Backend%20Development/service-behavior/nats/#the-developer-disables-the-nats-integration","title":"The developer disables the NATS integration","text":"<p>The developer may want to disable the NATS integration for testing purposes or because the service does not need NATS.</p> <p>Given I have the basic service configuration</p> <p>When I start the service without NATS</p> <p>Then the service should not connect to NATS.</p>"},{"location":"Backend%20Development/service-behavior/service/","title":"Service Lifecycle","text":""},{"location":"Backend%20Development/service-behavior/service/#starting-a-service","title":"Starting a service","text":"<p>The most trivial scenario of them all. We start the service and it should start. That\u2019s it. No more, no less. But it\u2019s a good start.</p> <p>Given I have the basic service configuration</p> <p>And I have a NATS server running on \u201cnats:4222\u201d</p> <p>When I start the service</p> <p>Then the service should start.</p>"},{"location":"Backend%20Development/typescript/","title":"Writing a Backend Service in TypeScript","text":"<p>TypeScript is the recommended language for writing backend services. It is a superset of JavaScript that adds static typing and other features that make it easier to write and maintain code.</p>","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/#prerequisites","title":"Prerequisites","text":"<p>To write a backend service in TypeScript, you should be familiar with JavaScript and (ideally) TypeScript. Overall, basic JavaScript knowledge will be sufficient to get started, but <code>async</code>/<code>await</code> and Promises are used extensively for services, so you should be familiar with these topics.</p>","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/#deno","title":"Deno","text":"<p>Deno is a JavaScript/TypeScript runtime that is built on top of V8, Rust, and Tokio. It is a secure runtime for JavaScript and TypeScript.</p> <p>Compared to Node.js, Deno has the following advantages:</p> <ul> <li>It has built-in TypeScript support</li> <li>It has built-in security features</li> <li>It\u2019s easier to deploy</li> </ul>","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/#installing-deno","title":"Installing Deno","text":"<p>To install Deno, please follow the instructions on the Deno website .</p>","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/#writing-a-basic-service","title":"Writing a basic Service","text":"","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/#creating-a-new-service","title":"Creating a new Service","text":"<p>Create a new directory for your service:</p> <pre><code>mkdir my-service\ncd my-service\n</code></pre> <p>Create a new file called <code>service.ts</code>:</p> <pre><code>touch service.ts\n</code></pre>","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/#writing-the-service","title":"Writing the Service","text":"<p>Open <code>service.ts</code> in your favorite editor and add the following code:</p> service.ts<pre><code>import { startService } from 'jsr:@wuespace/telestion';// (1)!\n\nawait startService/*(2)!*/({\n    nats: false,// (3)!\n});\n\nconsole.log('Hello World!');// (4)!\n</code></pre> <ol> <li>Import the <code>startService</code> function from the library.</li> <li>Start the service. This automatically connects to NATS and does some other setup.</li> <li>Disable NATS. We don\u2019t need it for this example and it would otherwise throw an error because we haven\u2019t configured it yet.</li> <li>Log a message to the console when the service starts.</li> </ol>","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/#running-the-service","title":"Running the Service","text":"<p>To run the service, run the following command:</p> <pre><code>deno run --allow-all service.ts --dev\n</code></pre> <p>Success</p> <p>You should see the following output:</p> <pre><code>Running in development mode. Using default values for missing environment variables.\nHello World!\n</code></pre> <p>Running in development mode</p> <p>When you run the service with the <code>--dev</code> flag, the service will use default values for missing environment variables. You\u2019ll learn more about this in the configuration section.</p>","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/#next-steps","title":"Next Steps","text":"<p>Now that you have a basic service running, you should have a look at how to make your service configurable.</p> <p>Read more about configuration</p> <p>If you prefer to learn by example, you can also have a look at the samples.</p> <p>Browse samples on GitHub</p>","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/configuration/","title":"Service Configuration","text":"<p>Tip</p> <p>Not every service needs to be configurable. If you are writing a simple service, you can skip this section.</p> <p>However, you can often save yourself a lot of time by making your service configurable. This way, you can use the same service in multiple environments without having to change the code.</p>","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/configuration/#configuration-sources","title":"Configuration Sources","text":"<p>Services can be configured using the following sources:</p> <ul> <li>Environment variables</li> <li>Command line arguments</li> <li>An optional configuration file (JSON)</li> </ul> <p>All these sources get combined into a single configuration object. If a configuration value is defined in multiple sources, the following order is used:</p> <ol> <li>Command line arguments</li> <li>Environment variables</li> <li>Configuration file</li> </ol>","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/configuration/#environment-variables","title":"Environment Variables","text":"<p>Environment variables are the most common way to configure a service. They are easy to use and supported by most platforms.</p> <p>Environment variables are always strings. If you need to use a different type, you will have to parse the value yourself.</p>","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/configuration/#command-line-arguments","title":"Command Line Arguments","text":"<p>Command line arguments are useful for configuring a service during development. They are also useful for overriding configuration values when running a service in production.</p>","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/configuration/#configuration-file","title":"Configuration File","text":"<p>Configuration files are useful for configuring a service in production. They are also useful for overriding configuration values when running a service in production.</p> <p>Configuration files are optional. If no configuration file is provided, the service will still start.</p> <p>A configuration file is a JSON file with an object as its root element. The keys of this object are the configuration values. The values of this object are the configuration values.</p> <p>The configuration file is loaded from the path passed as <code>CONFIG_FILE</code> as either environment variable or command line argument.</p> <p>You can optionally also pass a <code>CONFIG_KEY</code> to load a specific key from the configuration file. This is useful if you want to use the same configuration file for multiple services.</p>","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/configuration/#configuration-precedence-overview-diagram","title":"Configuration Precedence Overview Diagram","text":"<pre><code>graph TB\n    accTitle: Diagram of the configuration sources and their order of precedence. Text description in collapsed section below.\n    A[Environment Variables] --merged into--&gt; C[Preliminary Configuration]\n    B[Command line arguments] --merged into with priority--&gt; C\n    C -.CONFIG_FILE.-&gt; D[Configuration File]\n    D --merged into--&gt; E[Configuration Object]\n    C --merged into with priority--&gt; E</code></pre> <p>Configuration sources and their order of precedence.</p> Text Description <ol> <li>Environment variables are merged into the preliminary configuration.</li> <li>Command line arguments are merged into the preliminary configuration with priority.</li> <li>The configuration file is loaded (based on the <code>CONFIG_FILE</code> parameter of the preliminary configuration) and merged into the preliminary configuration.</li> <li>The preliminary configuration is merged into the configuration object with priority.</li> <li>The configuration object gets returned.</li> </ol>","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/configuration/#minimal-configuration-values","title":"Minimal Configuration Values","text":"<p>Some configuration values are required for all services. These values are:</p> <ul> <li><code>NATS_URL</code>: The URL of the NATS server to connect to.</li> <li><code>NATS_USER</code> (if the NATS server requires authentication): The username to use when connecting to NATS.</li> <li><code>NATS_PASSWORD</code> (if the NATS user requires authentication): The password to use when connecting to NATS.</li> <li><code>SERVICE_NAME</code>: The name of the service. This is used to identify the service in the logs and in the NATS server. This is required for all services.</li> <li><code>DATA_DIR</code>: The directory where the service can store data. This is required for all services.</li> </ul> <p>Tip</p> <p>To make it easier to run your service during development, sensible defaults are used when you pass the <code>--dev</code> flag to the service:</p> Configuration Value Default Value <code>NATS_URL</code> <code>localhost:4222</code> <code>NATS_USER</code> (none) <code>NATS_PASSWORD</code> (none) <code>SERVICE_NAME</code> <code>dev-[process gid]</code> <code>DATA_DIR</code> <code>./data</code> <p>This way, you don\u2019t have to set all the required configuration values when running the service locally.</p> <p>Without the <code>--dev</code> flag, the service fails if any of the required configuration values are missing.</p>","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/configuration/#accessing-the-configuration","title":"Accessing the Configuration","text":"<p>Now that you know about the different configuration sources, let\u2019s see how you can access the configuration in your service. Since the complicated bits are handled by the <code>startService</code> function, this is actually pretty straight forward.</p> <p>Create a file called <code>config.json</code> next to your <code>service.ts</code> file with the following content:</p> config.json<pre><code>{\n  \"SERVICE_NAME\": \"Config Tester\",\n  \"tasks\": {\n    \"task1\": \"Task 1\",\n    \"task2\": \"Task 2\"\n  }\n}\n</code></pre> <p>Now, let\u2019s adjust the <code>service.ts</code> file to use the configuration:</p> service.ts<pre><code>import { startService } from \"jsr:@wuespace/telestion\";\nimport { z } from \"https://deno.land/x/zod@v3.21.4/mod.ts\";// (1)!\n\nconst { config: rawConfig/* (2)! */} = await startService({\n  nats: false,\n});\n\nconst config = z.object({\n  NAME: z.string(),\n  tasks: z.record(z.string(), z.string()),\n}).parse(rawConfig);// (3)!\n\nconsole.log(config.NAME, config.tasks);// (4)!\n</code></pre> <ol> <li>Import the <code>z</code> function from the Zod to validate the configuration. Never assume the configuration is valid. Always validate it before using it.</li> <li>Save the raw configuration in a variable called <code>rawConfig</code>.</li> <li>Validate the configuration using Zod. This will throw an error if the configuration is invalid.</li> <li>You can now safely use the configuration in your service. If the configuration is invalid, the service will not start.</li> </ol> <p>Now, let\u2019s see what happens if we run the service:</p> <pre><code>deno run --allow-all service.ts --dev\n</code></pre> <p>As expected, the service doesn\u2019t start:</p> <pre><code>$ deno run --allow-all service.ts --dev\nRunning in development mode.\nUsing default values for missing environment variables.\nerror: Uncaught ZodError: [\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"string\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"NAME\"\n    ],\n    \"message\": \"Required\"\n  },\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"object\",\n    \"received\": \"undefined\",\n    \"path\": [\n      \"tasks\"\n    ],\n    \"message\": \"Required\"\n  }\n]\n</code></pre> <p>Let\u2019s fix this by passing the required configuration values:</p> <pre><code>deno run --allow-all service.ts --dev \\\n  --CONFIG_FILE ./config.json \\ # (1)!\n  --NAME \"Hello\" # (2)!\n</code></pre> <ol> <li>Pass the path to the configuration file using the <code>--CONFIG_FILE</code> flag.</li> <li>Pass the <code>NAME</code> configuration value using the <code>--NAME</code> flag.</li> </ol> <p>Now, everything works as expected.</p>","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/e2e-log-service/","title":"End to end example: Log Service","text":"<p>Note</p> <p>The author generated this text in part with GPT-3, OpenAI\u2019s large-scale language-generation model. Upon generating draft language, the author reviewed, edited, and revised the language to their own liking and takes ultimate responsibility for the content of this publication.</p> <p>This tutorial will explain step-by-step how to write a log service that will listen for messages on the <code>log.&gt;</code> subject and write them to a file.</p>","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/e2e-log-service/#steps","title":"Steps","text":"<ol> <li> <p>First, we need to import the <code>startService</code> function from our library (<code>lib.ts</code>) and the <code>encodeHex</code> function from the standard Deno library.</p> <pre><code>import { startService } from \"jsr:@wuespace/telestion\";\nimport { encodeHex } from \"jsr:@std/encoding\";\nimport { resolve } from \"jsr:@std/path\";\n</code></pre> </li> <li> <p>Next, we create a new TextEncoder instance. This will be used to turn messages into a format that can be written to a file.</p> <pre><code>const encoder = new TextEncoder();\n</code></pre> </li> <li> <p>We then call the <code>startService</code> function to set up our service. This will return an object containing information about the message bus that we can use to subscribe to messages.</p> <pre><code>const { messageBus, dataDir } = await startService();\n</code></pre> </li> <li> <p>We then resolve the log file path and create its parent directory if it doesn\u2019t exist yet.</p> <pre><code>const logFilePath = resolve(dataDir, \"log.txt\");\nawait Deno.mkdir(dataDir, { recursive: true });\n</code></pre> </li> <li> <p>We then subscribe to the message bus, using a wildcard subscription for any messages published on the <code>log.&gt;</code> subject. This will allow us to receive all messages published on any topics starting with <code>log.</code>.</p> <pre><code>const logMessages = messageBus.subscribe(\"log.&gt;\");\n</code></pre> </li> <li> <p>We use a for-await-of loop to receive messages from the message bus. For each message, we extract the subject (split the string on <code>.</code>, then take the second element) and the message data, which we encode using the <code>encodeHex</code> function from the standard library.</p> <pre><code>for await (const msg of logMessages) {\n  try {\n    const currentTime = new Date().toISOString();\n    const logMessage = encodeHex(msg.data).toString();\n    const subject = msg.subject.split(\".\")[1];\n</code></pre> </li> <li> <p>We log the message to the console and write it to a file (appending it to the end).</p> <pre><code>    console.log(`${currentTime} [${subject}] ${logMessage}`);\n    await Deno.writeFile(\n      logFilePath,\n      encoder.encode(`${currentTime} [${subject}] ${logMessage}\\n`),\n      { append: true },\n    );\n  } catch (error) {\n    console.error(error);\n  }\n}\n</code></pre> </li> </ol> <p>And that\u2019s it! Our service is now complete and ready to be used.</p>","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/e2e-log-service/#final-code","title":"Final Code","text":"<pre><code>import { startService } from \"jsr:@wuespace/telestion\";\nimport { encodeHex } from \"jsr:@std/encoding\";\nimport { resolve } from \"jsr:@std/path\";\n\nconst encoder = new TextEncoder();\n\nconst { messageBus, dataDir } = await startService();\n\nconst logFilePath = resolve(dataDir, \"log.txt\");\nawait Deno.mkdir(dataDir, { recursive: true });\n\nconst logMessages = messageBus.subscribe(\"log.&gt;\");\n\nfor await (const msg of logMessages) {\n  try {\n    const currentTime = new Date().toISOString();\n    const logMessage = encodeHex(msg.data).toString();\n    const subject = msg.subject.split(\".\")[1];\n\n    console.log(`${currentTime} [${subject}] ${logMessage}`);\n    await Deno.writeFile(\n      logFilePath,\n      encoder.encode(`${currentTime} [${subject}] ${logMessage}\\n`),\n      { append: true },\n    );\n  } catch (error) {\n    console.error(error);\n  }\n}\n</code></pre>","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/message-bus/","title":"Interacting with the Message Bus","text":"<p>The message bus is a simple, lightweight, and fast way to send messages between different parts (services) of your application. It is a simple publish/subscribe system that allows you to send messages to a specific subject and have any listeners on that subject receive the message.</p> <p>Running NATS for development</p> <p>Now that we want to interact with the message bus, we need to have NATS running. If you\u2019re using the <code>--dev</code> mode for testing your service, it\u2019s sufficient to run the <code>nats-server</code> executable in a separate terminal window. This will start a local NATS server on port <code>4222</code> which is the default port for NATS.</p> <p>If you have a prdouction-like setup, you\u2019ll need to pass the <code>NATS_USER</code> and <code>NATS_PASSWORD</code> corresponding to your NATS configuration as configuration parameters to your service for authentication.</p>","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/message-bus/#connecting-to-the-message-bus","title":"Connecting to the Message Bus","text":"<p>Connecting to the event bus is automatically handled by the <code>startService</code> function. It will connect to the message bus using the <code>NATS_URL</code> environment variable. If you\u2019re running the service in <code>--dev</code> mode, this will be <code>nats://localhost:4222</code> by default.</p> <p>All you need to do compared to the previous examples is to omit the <code>{ nats: false }</code> parameter from the <code>startService</code> function call:</p> service.ts<pre><code>import {\n    startService\n} from \"jsr:@wuespace/telestion\";\n\nconst {nc/* (1)! */} = await startService(/* (2)! */);\n</code></pre> <ol> <li>Store the NATS connection in a variable called <code>nc</code> for later use.</li> <li>Omit the <code>{ nats: false }</code> parameter from the <code>startService</code> function call since we want to connect to the message bus.</li> </ol> <p>Note</p> <p><code>startService</code> actually returns an object containing the NATS connection (<code>nc</code>) and a few other things. In our example, we use destructuring to only get the <code>nc</code> variable. This is equivalent to the following code:</p> <pre><code>const service = await startService();\nconst nc = service.nc;\n</code></pre>","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/message-bus/#publishing-messages","title":"Publishing Messages","text":"<p>Publishing messages is as simple as calling the <code>publish</code> function on the NATS connection:</p> <pre><code>await nc.publish(\"subject\"/*(1)!*/, message/*(2)!*/);\n</code></pre> <ol> <li>The subject (sometimes also called channel) to which the message gets published.</li> <li>The message data (also called payload or body).</li> </ol> <p>However, Telestion Hub uses a specific message format for all messages sent over the message bus. A message can be either JSON or a binary message. The binary message is used for sending large amounts of data, e.g., images or video streams. The JSON message is used for all other messages.</p>","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/message-bus/#json-messages","title":"JSON Messages","text":"<p>To send a JSON message, you need to create a JSON object and pass it to the <code>publish</code> function:</p> service.ts<pre><code>import {\n    startService\n} from \"jsr:@wuespace/telestion\";\n\nconst {nc} = await startService();\n\nawait nc.publish(\"subject\", JSON.stringify/*(1)!*/({\n    foo: \"some arbitrary JSON-compatible data\",\n    bar: 42\n}));\n</code></pre> <ol> <li>Encode the object into a JSON <code>string</code>.</li> </ol>","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/message-bus/#binary-messages","title":"Binary Messages","text":"<p>To send a binary message, you need to create a <code>Uint8Array</code> containing the bytes and pass it to the <code>publish</code> function:</p> service.ts<pre><code>import {\n    startService\n} from \"jsr:@wuespace/telestion\";\n\nconst {nc} = await startService();\n\nawait nc.publish(\"subject\", new Uint8Array([0x01, 0x02, 0x03]));\n</code></pre> <p>Uint8Arrays</p> <p>You can learn more about how you can use <code>Uint8Array</code> on MDN.</p>","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/message-bus/#subscribing-to-messages","title":"Subscribing to Messages","text":"<p>There are multiple ways to subscribe to messages on a subject. The most common way is to use the <code>subscribe</code> function in combination with a <code>for await</code> loop:</p> service.ts<pre><code>import {\n    startService\n} from \"jsr:@wuespace/telestion\";\n\nconst {nc} = await startService();\n\nconst subjectSubscription/*(1)!*/ = await nc.subscribe(\"subject\"/*(2)!*/);\n\nfor await (const message of subjectSubscription) {//(3)!\n    console.log(message.data);//(4)!\n}\n</code></pre> <ol> <li>Store the subscription in a variable called <code>subjectSubscription</code> for later use.</li> <li>Subscribe to the <code>subject</code> subject.</li> <li>For each message received on the subject, \u2026</li> <li>\u2026 print the message data to the console.</li> </ol> <p>Unfortunately, this won\u2019t decode our JSON messages automatically. We need to do this ourselves:</p> service.ts<pre><code>import {\n    startService\n} from \"jsr:@wuespace/telestion\";\n\nconst {nc} = await startService();\n\nconst subjectSubscription = await nc.subscribe(\"subject\");\nfor await (const message of subjectSubscription) {\n    const jsonMessage = message.json();//(1)!\n    console.log(jsonMessage.foo);//(2)!\n}\n</code></pre> <ol> <li>Decode the message payload using the built-in <code>json()</code> method. This will decode the message data if it\u2019s a JSON message and throw an error if it\u2019s not.</li> <li>Print the <code>foo</code> property of the decoded JSON message to the console.</li> </ol> <p>Danger</p> <p>Can you spot the problem with this code? What happens if the message data doesn\u2019t contain a <code>foo</code> property? Or if it\u2019s not a JSON message at all? This would lead to our service crashing!</p> <p>Never assume a message\u2019s structure!</p> <p>You should always validate the message data before using it. We\u2019ll cover this in the next section.</p>","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/message-bus/#validating-messages","title":"Validating Messages","text":"<p>A Telestion service must validate all messages it receives. This is to ensure that the service doesn\u2019t crash when it receives invalid messages.</p>","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/message-bus/#validating-the-message-type","title":"Validating the message type","text":"<p>The first \u201clayer\u201d of validation is the message type. A message can either be a JSON message or a binary message. The <code>Msg.json()</code> function will throw an error if the message data is not a valid JSON message. Therefore, we can use a <code>try</code>/<code>catch</code> block to catch the error and handle it accordingly:</p> service.ts<pre><code>// ...\n\nfor await (const message of subjectSubscription) {\n    try/*(3)!*/{\n        const jsonMessage = message.json();\n        console.log(jsonMessage.foo);\n    } catch (_e) {\n        console.error/*(2)!*/(\"Received invalid message:\", message);\n    }\n}\n</code></pre> <ol> <li>Catch the error thrown by <code>Msg.json()</code>.</li> <li>Print the error message to the console (or do whatever else you want to do when you receive an invalid message).</li> <li>Wrap the code that decodes the message in a <code>try</code>/<code>catch</code> block.</li> </ol> <p>Binary Messages</p> <p>Since any messages get sent as binary messages (in fact, the <code>json()</code> function does nothing else than convert the JSON message from a <code>Uint8Array</code>), there\u2019s no way to validate that a message is supposed to be a binary message. This makes the next section even more important.</p>","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/message-bus/#validating-the-message-structure","title":"Validating the message structure","text":"<p>The second \u201clayer\u201d of validation is the message structure. This is where you validate that the message data contains all the properties you expect it to contain. For example, if you expect a message to contain a <code>foo</code> property, you must verify its existence before using it.</p> <p>For structured JSON data, we recommend that you use the <code>zod</code> library for validation. This is also used in our <code>lib.ts</code> file to validate the configuration. You can find more information about <code>zod</code> in the library\u2019s GitHub repository.</p> <p>Let\u2019s create a <code>zod</code> schema for our JSON message in a new file called <code>foo-message.ts</code>:</p> foo-message.ts<pre><code>import {\n    z\n} from \"https://deno.land/x/zod@v3.16.1/mod.ts\";\n\nexport const fooMessageSchema = z.object/*(1)!*/(({\n    foo: z.string()/*(2)!*/,\n    bar: z.number().min(-10)/*(3)!*/\n});\n\nexport type FooMessage = z.infer&lt;typeof fooMessageSchema&gt;;//(4)!\n</code></pre> <ol> <li>A <code>FooMessage</code> must be an object.</li> <li>A <code>FooMessage</code> must have a <code>foo</code> property that is a string.</li> <li>A <code>FooMessage</code> must have a <code>bar</code> property that is a number and is greater than or equal to <code>-10</code>.</li> <li>This is a TypeScript type that represents the <code>FooMessage</code> type. While we won\u2019t use it in this example, it\u2019s good practice to create a type for each schema you create. This allows you to use the type anywhere in your code:    <pre><code>function foo(message: FooMessage) {\n     console.log(message.foo);\n}\n\n// ...\n\nconst fooMessage = fooMessageSchema.parse(\n     jsonCodec.decode(message.data)\n);\nfoo(fooMessage); // This works now!\n</code></pre></li> </ol> <p>Now we can use this schema to validate the message data:</p> service.ts<pre><code>import {\n    fooMessageSchema\n} from \"./foo-message.ts\";\n\n// ...\n\nfor await (const message of subjectSubscription) {\n    try {\n        const jsonMessage = fooMessageSchema.parse/*(1)!*/(\n            message.json()\n        );\n\n        console.log(jsonMessage/*(2)!*/.foo);\n    } catch (_e) {\n        console.error(\"Received invalid message:\", message);\n    }\n}\n</code></pre> <ol> <li>Validate the message data using the <code>fooMessageSchema</code> schema. This will throw an error if the message data doesn\u2019t match the schema.</li> <li>TypeScript now knows that <code>jsonMessage</code> is a valid <code>FooMessage</code> object. Therefore, we can access the <code>foo</code> property without any problems.</li> </ol> <p>Success</p> <p>If your editor has great TypeScript support and has shown you warnings/errors before, they are now gone! This is because TypeScript now knows that the <code>jsonMessage</code> variable is a valid <code>FooMessage</code> object. In other words, your code is now safe from invalid messages!</p> <p>Binary Messages</p> <p>For binary messages, you can\u2019t use <code>zod</code> to validate the message structure. Instead, you should use the <code>Uint8Array</code> methods to validate the message structure. For example, you can check the length of the message data using the <code>length</code> property of the <code>Uint8Array</code>:</p> <pre><code>if (message.data.length !== 3) {\n    console.error(\"Received invalid message:\", message);\n}\n</code></pre> <p>However, the exact validation required completely depends on your use case. Just make sure that your code doesn\u2019t crash when it receives an invalid message.</p>","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/message-bus/#subscribing-to-multiple-topics","title":"Subscribing to Multiple Topics","text":"<p>So far, we\u2019ve used the <code>for await</code> loop. This is a convenient way to subscribe to a single topic. However, if you want to do more than just react to messages from a specific subject, we get into trouble. Since the <code>for await</code> loop is blocking, we can\u2019t do anything else while we\u2019re waiting for messages.</p> <p>We can solve this by wrapping the <code>for await</code> loop in an <code>async</code> function and calling it in a separate thread. This allows us to do other things while we\u2019re waiting for messages:</p> service.ts<pre><code>// ...\n\nconst subjectMessages = nc.subscribe(\"foo\");\n(async () =&gt; {//(1)!\n    for await (const message of subjectMessages) {\n        // Handle messages from the \"foo\" subject\n    }\n})();\n\n// ... (2)\n</code></pre> <ol> <li>Wrap the <code>for await</code> loop in an <code>async</code> function and call it immediately. This will start the subscription in parallel to the rest of the code. </li> <li>Do other things while we\u2019re waiting for messages.</li> </ol> <p>Note that we\u2019re storing the return value of <code>nc.subscribe</code> in a variable outside the <code>async</code> function. This is important so that we can close the subscription or check its status later.</p> <p>Closing the Subscription</p> <p>You can close the subscription by calling the <code>unsubscribe</code> method on the subscription object:</p> <pre><code>const subjectMessages = nc.subscribe(\"foo\");\n// ...\nsubjectMessages.unsubscribe();\n</code></pre> <p>You must call <code>unsubscribe</code> on the subscription object. Calling <code>nc.unsubscribe</code> will unsubscribe from all subscriptions!</p> <p>This now allows us to subscribe to multiple topics:</p> service.ts<pre><code>// ...\n\nconst fooMessages = nc.subscribe(\"foo\");//(1)!\n(async () =&gt; {\n    for await (const message of fooMessages) {\n        // Handle messages from the \"foo\" subject\n    }\n})();\n\nconst barMessages = nc.subscribe(\"bar\");//(2)!\n(async () =&gt; {\n    for await (const message of barMessages) {\n        // Handle messages from the \"bar\" subject\n        if (shouldUnsubscribeFoo(message))\n            fooMessages.unsubscribe/*(3)!*/();\n\n        if (shouldUnsubscribeBar(message))\n            barMessages.unsubscribe/*(4)!*/();\n    }\n})();\n\nawait Promise.all/*(5)!*/([\n    fooMessages.closed,\n    barMessages.closed\n]);\n\nconsole.log(\"All subscriptions closed!\");//(6)!\n</code></pre> <ol> <li>Subscribe to the <code>foo</code> subject.</li> <li>Subscribe to the <code>bar</code> subject (in parallel to the <code>foo</code> subscription).</li> <li>Unsubscribe from the <code>foo</code> subject if the <code>shouldUnsubscribeFoo</code> function returns <code>true</code>.</li> <li>Unsubscribe from the <code>bar</code> subject if the <code>shouldUnsubscribeBar</code> function returns <code>true</code>.</li> <li>Wait for both subscriptions to close. This will happen when the <code>unsubscribe</code> method is called on the subscription object.<p> The <code>closed</code> property is a <code>Promise</code> that resolves when the subscription is closed.<p> <code>Promise.all</code> is a convenient way to wait for multiple promises to resolve. It returns a <code>Promise</code> that resolves when all promises passed to it have resolved. <li>Log a message when both subscriptions are closed.</li>","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/message-bus/#queue-groups","title":"Queue Groups","text":"<p>Info</p> <p>Queue groups are a way to distribute messages between multiple subscribers. If you have multiple subscribers to a subject, you can use queue groups to distribute messages between them. This is useful if you want to distribute messages between multiple instances of a service (for example, if you want to scale your service horizontally because processing a message takes too long).</p> <p>All you have to do to use queue groups is to pass a <code>queue</code> option to the <code>subscribe</code> method. You can use any string as the queue name, but by its definition, the <code>SERVICE_NAME</code> configuration parameter works perfect for this. For convenience, this gets exposed as <code>serviceName</code> on the object returned by <code>startService</code>:</p> service.ts<pre><code>// ...\n\nconst {\n    nc,\n    serviceName/*(1)!*/\n} = await startService();\n\nconst fooMessages = nc.subscribe(\n    \"foo\", \n    {queue: serviceName/*(2)!*/}\n);\n(async () =&gt; {\n    for await (const message of fooMessages) {\n        // Handle messages from the \"foo\" subject\n    }\n})();\n\n// ...\n</code></pre> <ol> <li>Get the <code>serviceName</code> from the object returned by <code>startService</code>.</li> <li>Pass the <code>serviceName</code> as the <code>queue</code> option to the <code>subscribe</code> method.</li> </ol> <p>If you now run multiple instances of your service, you\u2019ll see that messages are distributed between them. This is because the <code>queue</code> option tells the message bus to distribute messages between all subscribers with the same queue name.</p> <p>Service names in development mode</p> <p>When you run your service in development mode, the <code>serviceName</code> will be generated. This means that you\u2019ll get a different service name every time you start your service. To avoid this, you can either set the <code>SERVICE_NAME</code> environment variable or pass a service name via the CLI:</p> <pre><code>deno run --allow-all service.ts --dev --SERVICE_NAME=foo\n</code></pre>","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/message-bus/#wildcards","title":"Wildcards","text":"<p>Wildcards are a way to subscribe to multiple subjects at once. This is useful if you want to subscribe to multiple subjects that have a common prefix. For example, you could have a service that handles all requests to the <code>/api</code> endpoint. You could then subscribe to all requests to the <code>/api</code> endpoint by subscribing to the <code>api.&gt;</code> subject.</p> <p>There are two types of wildcards: <code>*</code> and <code>&gt;</code>. The <code>*</code> wildcard matches a single token. The <code>&gt;</code> wildcard matches one or more tokens. For example, the <code>api.*</code> subject matches <code>api.foo</code> and <code>api.bar</code>, but not <code>api.foo.bar</code>. The <code>api.&gt;</code> subject matches <code>api.foo</code>, <code>api.bar</code>, and <code>api.foo.bar</code>.</p> <p>You can use wildcards in the <code>subscribe</code> method and then use the <code>subject</code> property of the message to check which subject the message was sent to:</p> service.ts<pre><code>// ...\n\n/**\n * A simple key-value store.\n */\nconst store: Record&lt;string, unknown&gt; = {};\n\nconst kvMessages = nc.subscribe/*(1)!*/(\"kv.&gt;\");\n(async () =&gt; {\n    for await (const message of kvMessages) {\n        try {\n            const [_kv, action, ...keyParts] =\n                message.subject.split/*(2)!*/(\".\");\n\n            const key = keyParts.join(\".\");\n\n            if (action === \"get\") {\n                // retrieve the value from the store\n                message.respond(\n                    JSON.stringify(store[key])\n                );\n            } else if (action === \"set\") {\n                // set the value in the store\n                store[key] = message.json();\n                message.respond(JSON.stringify({ok: true});\n            }\n        } catch (error) {\n            message.respond(\n                JSON.stringify({error: error.message})\n            );\n        }\n    }\n})();\n</code></pre> <ol> <li>Subscribe to the <code>kv.&gt;</code> subject. This matches all subjects that start with <code>kv.</code>.</li> <li>Split the subject into tokens. The first token is <code>kv</code>, the second token is the action, and the rest of the tokens are the key. We store these into variables using array destructuring.</li> </ol> <p>In this example, we subscribe to the <code>foo.*</code> subject. We then use the <code>subject</code> property of the message to check which action was requested. If the action is <code>get</code>, we get the value from the <code>store</code> object and respond with it. If the action is <code>set</code>, we set the value in the <code>store</code> object.</p> <p>For example, if we send a message to the <code>foo.get.bar</code> subject, we\u2019ll get the value of the <code>bar</code> key in the <code>store</code> object. If we send a message to the <code>foo.set.bar</code> subject with the value <code>42</code>, we\u2019ll set the value of the <code>bar</code> key in the <code>store</code> object to <code>42</code>.</p> <p>Success</p> <p>Woohoo! You\u2019ve just re-implemented a key-value store using the message bus, which (with a few convenience features on top) is an essential part of Telestion\u2019s standard services! </p>","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/message-bus/#requestreply","title":"Request/Reply","text":"<p>So far, we\u2019ve looked at publishing messages and subscribing to messages. However, there\u2019s one more thing we can do with the message bus: request/reply.</p> <p>Request/reply is a pattern where one service sends a request to another service and waits for a response. This is useful if you want to get data from another service. For example, you could have a service that stores data in a database. Other services can then request data from this service.</p>","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/message-bus/#sending-a-request","title":"Sending a Request","text":"<p>Let\u2019s start by looking at how we can send a request. We can use the <code>request</code> method on the <code>NatsConnection</code> object to send a request. This makes it incredibly easy to send a request:</p> service.ts<pre><code>// ...\n\nconst response = await nc.request/*(1)!*/(\n    \"fooRequest\"/*(2)!*/,\n    JSON.stringify({foo: \"bar\"})/*(3)!*/\n);\nconsole.log(response.data);\n</code></pre> <ol> <li>Call the <code>request</code> method on the <code>NatsConnection</code> object. This method returns a <code>Promise</code> that resolves when the response is received. The response has the same form as the messages we\u2019ve already seen in our <code>for await</code> loops.</li> <li>Specify the subject to send the request to.</li> <li>Encode the request message data using the <code>jsonCodec</code> codec. This is the same as we\u2019ve done before.</li> </ol> <p>Tip: Specifying a timeout</p> <p>As it is, our code will wait forever for a response. This is probably not what we want. We can specify a timeout by passing a second argument to the <code>request</code> method:</p> <pre><code>const response = await nc.request(\n    \"fooRequest\", \n    JSON.stringify({foo: \"bar\"}),\n    {timeout: 1000}\n);\n</code></pre> <p>This will cause the <code>request</code> method to reject the <code>Promise</code> if no response is received within 1000 milliseconds. Make sure to handle the rejection by handling it appropriately.</p>","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/message-bus/#handling-a-request","title":"Handling a Request","text":"<p>Now that we know how to send a request, let\u2019s look at how we can handle a request. We can use the <code>subscribe</code> method on the <code>NatsConnection</code> object to subscribe to a subject. This allows us to handle requests:</p> service.ts<pre><code>// ...\n\nconst requestMessages = nc.subscribe/*(1)!*/(\"fooRequest\");\n\n(async () =&gt; {\n    for await (const message of requestMessages) {//(2)!\n        message.respond/*(3)!*/(JSON.stringify({bar: \"baz\"}));\n    }\n})();\n</code></pre> <ol> <li>Subscribe to the <code>fooRequest</code> subject as usual.</li> <li>Iterate over the messages received from the <code>fooRequest</code> subject as usual.</li> <li>Respond to the request by calling the <code>respond</code> method on the message object. This method takes a single argument: the response message data. This is the same as we\u2019ve done before.</li> </ol> <p>Tip</p> <p>The <code>message</code> received from the <code>fooRequest</code> subject is the same as the <code>message</code> received from the <code>foo</code> subject. This means that we can use the same steps to handle the message as we\u2019ve done before if we need the data to handle the request.</p>","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/message-bus/#related-links","title":"Related Links","text":"<p>While we\u2019ve covered the basics of interacting with the message bus in this article, there are a few more things you can do with the message bus. You can find more information about the message bus in the NATS documentation. While the connection to the message bus is handled by the <code>startService</code> function, topics like receiving and sending messages are covered more extensively (including useful concepts like request/reply, queue groups, etc.) in the NATS documentation.</p>","tags":["Backend","TypeScript"]},{"location":"Backend%20Development/typescript/samples/","title":"Samples","text":"<p>You can find even more samples in the project\u2019s GitHub repository under <code>backend-deno/samples</code>:</p> <p>Browse samples on GitHub</p>"},{"location":"Backend%20Development/typescript/samples/#running-the-samples","title":"Running the samples","text":"<p>You can run all the samples using the <code>docker-compose.yml</code> file in the linked folder. Just run the following command:</p> <pre><code>docker-compose up\n</code></pre> <p>This will run all the samples, including the required NATS server.</p>"},{"location":"Deployment/","title":"Deployment","text":"<p>Deployment is the process of making a software system available for use. In the context of Telestion, deployment refers to the process of making the Telestion application available for use.</p> <p>Warning</p> <p>The deployment process is heavily dependent on the specific use case. The following documentation is intended to give a general overview of the deployment process that\u2019s available by default in new Telestion Projects.</p> <p>Depending on your project, you may need to adapt the deployment process to your specific needs.</p>","tags":["Deployment"]},{"location":"Deployment/#deployment-methods","title":"Deployment Methods","text":"<p>Telestion can be deployed in multiple ways:</p> <ul> <li>Local Deployment</li> <li>Docker Deployment</li> <li>Kubernetes Deployment</li> </ul> <p>Info</p> <p>The local deployment is the easiest way to get started with Telestion. You should probably start with the local deployment and then move on to the other deployment methods as needed.</p>","tags":["Deployment"]},{"location":"Deployment/#nats-and-its-configuration","title":"NATS and its configuration","text":"<p>Telestion uses NATS as its message broker. NATS is a lightweight, high-performance cloud-native messaging system. It is used for the communication between the Telestion backend and the Telestion frontend.</p> <p>No matter which deployment method you choose, you need to configure NATS. The configuration of NATS is described in the NATS Configuration document.</p>","tags":["Deployment"]},{"location":"Deployment/concepts/","title":"Concepts","text":"<p>This document describes the pre-requisites for deploying Telestion on your local machine.</p>","tags":["Deployment"]},{"location":"Deployment/concepts/#docker","title":"Docker","text":"<p>Docker is a containerization platform that allows you to package your application and all its dependencies together in the form of containers to ensure that your application works seamlessly in any environment be it development or test or production.</p>","tags":["Deployment"]},{"location":"Deployment/concepts/#docker-compose","title":"Docker Compose","text":"<p>Docker Compose is a tool for defining and running multi-container Docker applications. With Compose, you use a YAML file to configure your application\u2019s services. Then, with a single command, you create and start all the services from your configuration.</p>","tags":["Deployment"]},{"location":"Deployment/concepts/#kubernetes","title":"Kubernetes","text":"<p>Info</p> <p>Kubernetes is not required for deploying Telestion. It\u2019s mostly relevant for big production deployments.</p> <p>Kubernetes is an open source container-orchestration system for automating computer application deployment, scaling, and management.</p>","tags":["Deployment"]},{"location":"Deployment/concepts/#web-server","title":"Web Server","text":"<p>Info</p> <p>For Telestion, a web server is required to serve the frontend application to the user.</p> <p>A web server is server software, or hardware dedicated to running said software, that can satisfy web client requests. A web server can, in general, contain one or more websites. A web server processes incoming network requests over HTTP and several other related protocols.</p>","tags":["Deployment"]},{"location":"Deployment/concepts/#nats","title":"NATS","text":"<p>Info</p> <p>Telestion uses NATS as a message broker. It\u2019s required for the communication between the Telestion services (both backend and frontend).</p> <p>NATS is a simple, secure and high-performance open source messaging system for cloud native applications, IoT messaging, and microservice architectures.</p>","tags":["Deployment"]},{"location":"Deployment/docker/","title":"Docker Deployment","text":"<p>This document describes how to deploy Telestion using Docker.</p>"},{"location":"Deployment/docker/#guidelines","title":"Guidelines","text":"<p>These guidelines are not strict rules, but they are recommended to follow. If you have a good reason to deviate from them, feel free to do so. Or in other words: If you don\u2019t know why you should deviate from them, don\u2019t do it.</p>"},{"location":"Deployment/docker/#images-per-service-type","title":"Images per Service Type","text":"<p>Depending on your project, it might make sense to have individual images for each service. However, for smaller projects, this is often both unnecessary and cumbersome. In this case, it is recommended to have one image for all services of a specific type.</p> <p>For example, you would have one image for all Deno based Backend services, one for the frontend, and so on. This way, you won\u2019t have to build and push huge numbers of images, and you can still use the same image for all services of a specific type.</p>"},{"location":"Deployment/docker/#dependency-installation-at-build-time","title":"Dependency Installation at Build Time","text":"<p>If you have a service that requires dependencies to be installed, it is recommended to do so at build time. This way, you can be sure that the dependencies are installed when the image is built, and you don\u2019t have to wait for them to be installed when the container is started.</p> <p>This ensures both a faster startup time and a consistent execution environment.</p>"},{"location":"Deployment/kubernetes/","title":"Kubernetes Deployment","text":"<p>This document describes how to deploy Telestion using Kubernetes.</p> <p>(Work in progress)</p>"},{"location":"Deployment/local/","title":"Local Deployment","text":"<p>Telestion can be deployed locally on your machine. This can have several reasons, for example:</p> <ul> <li>You want to test your application before deploying it to a server</li> <li>You want to develop an application and test it locally</li> <li>You want to run Telestion on a machine without internet connection</li> <li>You want to run Telestion on a machine without Docker/Kubernetes</li> <li>You need to access the machine directly (for example, for CAN bus access)</li> </ul> <p>Note</p> <p>It\u2019s a common tactic to have most Telestion services running in a cloud environment and only the services that need direct access to the machine running locally.</p> <p>This is easy to achieve thanks to NATS and means that you can have the best of both worlds.</p>","tags":["Deployment","Local"]},{"location":"Deployment/local/local-nats/","title":"Deploying NATS","text":"<p>NATS isn\u2019t complicated to deploy. This guide will show you how to deploy NATS locally.</p>","tags":["Deployment","Local"]},{"location":"Deployment/local/local-nats/#installing-nats","title":"Installing NATS","text":"<p>Download the NATS server from the NATS download page.</p>","tags":["Deployment","Local"]},{"location":"Deployment/local/local-nats/#running-nats","title":"Running NATS","text":"<p>Run the NATS server with the following command:</p> <pre><code>nats-server\n</code></pre>","tags":["Deployment","Local"]},{"location":"Deployment/local/local-nats/#configuring-nats","title":"Configuring NATS","text":"<p>NATS can be configured using a configuration file. To run NATS with a configuration file, use the following command:</p> <pre><code>nats-server -c &lt;path-to-config-file&gt;\n</code></pre> <p>As a starting point, you can use the following configuration to enable everything you need while developing:</p> nats.conf<pre><code>http_port: 8222\n\nwebsocket: {\n     port: 9222\n     no_tls: true\n}\n</code></pre> <p>This will enable the HTTP and WebSocket interfaces.</p> <p>Note that for production deployments, you need to configure NATS to use TLS and set up proper authentication. You can learn more about configuring NATS in the NATS configuration guide.</p> <p>Learn more about NATS configuration</p>","tags":["Deployment","Local"]},{"location":"Deployment/local/local-typescript-service/","title":"Deploying TypeScript services","text":"","tags":["Deployment","Local"]},{"location":"Deployment/local/local-typescript-service/#deploying-a-single-service","title":"Deploying a single service","text":"<p>(coming soon)</p>","tags":["Deployment","Local"]},{"location":"Deployment/local/local-typescript-service/#deploying-multiple-services-using-the-process-manager-pup","title":"Deploying multiple services using the process manager <code>pup</code>","text":"<p>The process manager <code>pup</code> is a tool that can be used to run multiple services at once without having to manually start each service. It also makes it easy to manage the running services.</p>","tags":["Deployment","Local"]},{"location":"Deployment/local/local-typescript-service/#installing-pup","title":"Installing <code>pup</code>","text":"<p>Install <code>pup</code> using the following command:</p> <pre><code>deno install -Afr https://deno.land/x/pup/pup.ts\n</code></pre>","tags":["Deployment","Local"]},{"location":"Deployment/local/local-typescript-service/#configuring-pup","title":"Configuring <code>pup</code>","text":"<p>In your project\u2019s root directory, create a file called <code>pup.jsonc</code> with the following contents:</p> <pre><code>{\n  \"services\": [\n    {\n      \"name\": \"service1\",\n      \"command\": \"deno run --allow-net --allow-env service1.ts\",\n      \"env\": {\n        \"SERVICE_NAME\": \"service1\",\n        \"NATS_URL\": \"nats://localhost:4222\",\n        \"NATS_USER\": \"service\",\n        \"NATS_PASSWORD\": \"service\"\n      }\n    },\n    {\n      \"name\": \"service2\",\n      \"command\": \"deno run --allow-net --allow-env service2.ts\",\n      \"env\": {\n        \"SERVICE_NAME\": \"service1\",\n        \"NATS_URL\": \"nats://localhost:4222\",\n        \"NATS_USER\": \"service\",\n        \"NATS_PASSWORD\": \"service\"\n      }\n    }\n  ]\n}\n</code></pre>","tags":["Deployment","Local"]},{"location":"Deployment/local/local-typescript-service/#running-pup","title":"Running <code>pup</code>","text":"<p>Run <code>pup</code> using the following command:</p> <pre><code>pup -c pup.jsonc run\n</code></pre> <p>This will start the pup runner. To start the services, run the following command:</p> <pre><code>pup -c pup.jsonc start all\n</code></pre> <p>Tip</p> <p>If you want to have a service starting immediately after the runner starts, you can add <code>\"autostart\": true</code> to that service\u2019s configuration.</p> <p>To stop the services, run the following command:</p> <pre><code>pup -c pup.jsonc stop all\n</code></pre> <p>Tip</p> <p>You can also stop a single service by specifying its name instead of <code>all</code>.</p> <p>You can get the status of the services using the following command:</p> <pre><code>pup -c pup.jsonc status\n</code></pre> <p>Tip: Running NATS through <code>pup</code></p> <p>You can even run NATS through <code>pup</code>. Just add the following service to your <code>pup.jsonc</code> file:</p> <pre><code>{\n  \"name\": \"nats\",\n  \"command\": \"nats-server -c &lt;path-to-config-file&gt;\",\n  \"env\": {}\n}\n</code></pre> <p>You can find more information about <code>pup</code> on their documentation page.</p>","tags":["Deployment","Local"]},{"location":"Deployment/nats/","title":"NATS Server Configuration","text":"<p>The NATS server can be configured using both a configuration file and environment variables.</p>"},{"location":"Deployment/nats/#environment-variables","title":"Environment Variables","text":"<p>The NATS server configuration is done via environment variables. The following table lists all available environment variables and their default values.</p> Environment Variable Default Value Description <code>NATS_HOST</code> <code>localhost</code> The host of the NATS server. <code>NATS_PORT</code> <code>4222</code> The port of the NATS server."},{"location":"Deployment/nats/#configuration-file","title":"Configuration File","text":"<p>The NATS server can also be configured using a configuration file. To use a configuration file, you need to pass the <code>-c</code> flag to the NATS server:</p> <pre><code>nats-server -c &lt;path-to-config-file&gt;\n</code></pre> <p>You can find a full reference of the NATS server configuration in the NATS documentation.</p> <p>For Telestion, the following settings are of special interest:</p> <ol> <li><code>websocket</code> - This section configures the WebSocket interface of the NATS server. It\u2019s used by the Telestion frontend to connect to the NATS server.</li> <li><code>authorization</code> - This section configures who can publish and subscribe to which subjects.</li> <li><code>authorization.users</code>  - This section configures the user accounts that can connect to the NATS server. It\u2019s used to configure the user accounts that can connect to the NATS server. As of right now, Telestion exclusively supports username/password-based authentication.</li> </ol>"},{"location":"Deployment/nats/#development-configuration","title":"Development Configuration","text":"<p>The following configuration is a good starting point for development.</p> <p>Danger</p> <p>Do not use this configuration in production! It\u2019s only meant for development.</p> <p>There are several problems with this configuration that make it unsuitable for production:</p> <ol> <li>it doesn\u2019t use TLS for the websocket interface, meaning that all communication is unencrypted</li> <li>it doesn\u2019t have any authentication or authorization configured, meaning that anyone can connect to the NATS server and publish/subscribe to any subject</li> </ol> <p>In essence, if you were to use this configuration in production, you would have a NATS server that is publicly accessible and allows anyone with access to your server to publish/subscribe to any subject!</p> nats.conf<pre><code>http_port: 8222\n\nwebsocket: {\n    port: 9222\n    no_tls: true\n}\n</code></pre>"},{"location":"Frontend%20Development/","title":"Frontend","text":"<p>Processing data is only half the fun. To make the data accessible to the user, you need a frontend.</p> <p>Telestion uses a frontend based on React, TypeScript, and Bootstrap.  Thankfully, Telestion (together with vite) provides a lot of tools to make frontend development as easy as possible.</p> <p>All you need to get started is an installation of Node.js and pnpm.</p>"},{"location":"Frontend%20Development/#creating-a-new-frontend","title":"Creating a new Frontend","text":"<p>To create a new frontend, create a new directory for it:</p> <pre><code>mkdir telestion-frontend &amp;&amp; cd telestion-frontend\n</code></pre> <p>Now, add the following files to your directory:</p>"},{"location":"Frontend%20Development/#packagejson","title":"<code>package.json</code>","text":"<pre><code>{\n  \"name\": \"telestion-frontend\",\n  \"version\": \"1.0.0\",\n  \"type\": \"module\",\n  \"dependencies\": {\n    \"@wuespace/telestion\": \"^1.0.0-alpha.4\",// (1)!\n    \"react\": \"^18.2.0\",\n    \"zod\": \"^3.22.4\"// (2)!\n  },\n  \"devDependencies\": {\n    \"@vitejs/plugin-react\": \"^5.0.4\",\n    \"vite\": \"^7.1.7\"\n  }\n}\n</code></pre> <ol> <li>Add the <code>@wuespace/telestion</code> package as a dependency. This package contains all the tools you need to get started with frontend development.</li> <li>Add the <code>zod</code> package as a dependency. This package is used to validate any data that is sent to the frontend.</li> </ol>"},{"location":"Frontend%20Development/#viteconfigts","title":"<code>vite.config.ts</code>","text":"<pre><code>import { defineConfig } from \"vite\";\nimport react from '@vitejs/plugin-react';\n\nexport default defineConfig({\n  plugins: [react()/*(1)!*/],\n});\n</code></pre> <ol> <li>Add the <code>react</code> plugin to vite. This plugin allows you to use React in your frontend.</li> </ol>"},{"location":"Frontend%20Development/#indexhtml","title":"<code>index.html</code>","text":"<pre><code>&lt;!doctype html&gt;\n&lt;html lang=\"en\"&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"UTF-8\" /&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" /&gt;\n    &lt;title&gt;Telestion Frontend&lt;/title&gt;\n  &lt;/head&gt;\n  &lt;body data-bs-theme=\"dark\"&gt;&lt;!-- (1)! --&gt;\n    &lt;div id=\"root\"&gt;&lt;/div&gt;&lt;!-- (2)! --&gt;\n    &lt;script type=\"module\" src=\"/index.ts\"&gt;&lt;/script&gt;&lt;!-- (3)! --&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <ol> <li>Add the <code>data-bs-theme</code> attribute to the <code>body</code> tag. This attribute is used to set the default theme of the frontend. You can choose between <code>light</code> and <code>dark</code>.</li> <li>Add a <code>div</code> tag with the id <code>root</code>. This is where your frontend will be rendered.</li> <li>Add a <code>script</code> tag that loads the <code>index.ts</code> file. This file is the entry point of your frontend.</li> </ol>"},{"location":"Frontend%20Development/#indexts","title":"<code>index.ts</code>","text":"<pre><code>import { initTelestion, registerWidgets } from \"@wuespace/telestion\"; // (1)!\n\nimport \"@wuespace/telestion/telestion.css\"; // (2)!\n\n// initialize Telestion\nawait initTelestion/* (3)!*/({\n  version: \"1.0.0\",// (4)!\n});\n\n// register your widget in Telestion\nregisterWidgets(/*...*/);// (5)! \n</code></pre> <ol> <li>Import the <code>initTelestion</code> and <code>registerWidgets</code> functions from the <code>@wuespace/telestion</code> package.</li> <li>Import the <code>telestion.css</code> file from the <code>@wuespace/telestion</code> package. This file contains all the styles (including all Bootstrap styles) you need to get started with frontend development.</li> <li>Initialize Telestion. This sets up a basic frontend including authentication, dashboards, etc.</li> <li>Set the version of your frontend. This is used to check if the user data needs to be migrated.</li> <li>Register your widgets in Telestion. This is explained in more detail in the next section.</li> </ol>"},{"location":"Frontend%20Development/#installing-dependencies","title":"Installing Dependencies","text":"<p>To install the dependencies, run the following command:</p> <pre><code>pnpm install\n</code></pre>"},{"location":"Frontend%20Development/#running-the-frontend","title":"Running the Frontend","text":"<p>To run the frontend, run the following command:</p> <pre><code>pnpm dlx vite\n</code></pre> <p>This will start a development server on port 5173. You can now open your browser and navigate to  http://localhost:5173.</p>"},{"location":"Frontend%20Development/#building-the-frontend","title":"Building the Frontend","text":"<p>To build the frontend, run the following command:</p> <pre><code>pnpm dlx vite build\n</code></pre>"},{"location":"Frontend%20Development/#next-steps","title":"Next Steps","text":"<p>Now that you have a basic frontend running, you should have a look at how to add widgets to it.</p>"},{"location":"Frontend%20Development/concepts/","title":"Concepts","text":"<p>This document describes the various concepts you need to know when building components for the Telestion frontend.</p>","tags":["Frontend Development"]},{"location":"Frontend%20Development/concepts/#overview","title":"Overview","text":"<p>You can find the most important concepts of the Telestion frontend as well as how they relate to each other in the following diagram:</p> <pre><code>graph BT\n  frontend[Telestion Frontend] --&gt;|is written in|react[React]\n  react --&gt;|uses the programming language|ts[TypeScript]\n  user[User] --&gt;|uses|frontend\n  subgraph frontend[Telestion Frontend]\n    dashboard[Dashboard]\n    widgetInstance[Widget Instances]\n    widget[Widgets]\n  end\n  dashboard[Dashboard] --&gt;|is a layout of|widgetInstance[Widget Instances]\n  widget --&gt;|defines the look and behavior of|widgetInstance[Widget Instances]\n  click widgetInstance \"#widget-instances\" \"Widget Instance\"\n  click widget \"#widget\" \"Widget\"\n  click dashboard \"#dashboard\" \"Dashboard\"\n  click react \"#react\" \"React\"\n  click ts \"#typescript\" \"TypeScript\"</code></pre> <p>You can click on the elements in the diagram to learn more about them.</p>","tags":["Frontend Development"]},{"location":"Frontend%20Development/concepts/#frontend","title":"Frontend","text":"<p>The Telestion frontend is the part of Telestion that is visible to the user. It is built with React and TypeScript. It is responsible for displaying data from the backend and for sending commands to the backend.</p>","tags":["Frontend Development"]},{"location":"Frontend%20Development/concepts/#dashboard","title":"Dashboard","text":"<p>A dashboard is a layout of widget instances with a specific configuration, created by the user. They are the main part of the Telestion frontend.</p>","tags":["Frontend Development"]},{"location":"Frontend%20Development/concepts/#widget-instances","title":"Widget Instances","text":"<p>A widget instance is an instance of a widget with a specific configuration. They are the building blocks of dashboards.</p>","tags":["Frontend Development"]},{"location":"Frontend%20Development/concepts/#widget","title":"Widget","text":"<p>A widget is the type of a widget instance. It contains the code that defines how the widget instance looks like and how it behaves.</p>","tags":["Frontend Development"]},{"location":"Frontend%20Development/concepts/#htmlcssjavascript","title":"HTML/CSS/JavaScript","text":"<p>HTML, CSS, and JavaScript are the three core technologies of the web. HTML is used to describe the structure of web pages. CSS is used to describe the presentation of web pages. JavaScript is used to describe the behavior of web pages.</p>","tags":["Frontend Development"]},{"location":"Frontend%20Development/concepts/#react","title":"React","text":"<p>The Telestion frontend is built with React. React is a JavaScript library for building user interfaces. It is component-based and declarative. This means that you can build your UI from small, reusable components and that you can describe how your UI should look like without having to worry about how it is rendered.</p>","tags":["Frontend Development"]},{"location":"Frontend%20Development/concepts/#components","title":"Components","text":"<p>Components are the building blocks of React applications. They are small, reusable pieces of code that can be composed to build more complex components. Components can be either functional or class-based. Functional components are just functions that return a React element.</p>","tags":["Frontend Development"]},{"location":"Frontend%20Development/concepts/#jsx","title":"JSX","text":"<p>JSX is a syntax extension to JavaScript that allows you to write HTML-like code in your JavaScript files. It is not required to use JSX when writing React applications, but it is recommended. JSX makes your code more readable and easier to write. It also allows you to use the full power of JavaScript inside your HTML-like code.</p>","tags":["Frontend Development"]},{"location":"Frontend%20Development/concepts/#props","title":"Props","text":"<p>Props are the way to pass data from a parent component to a child component. They are immutable and can only be changed by the parent component. Props are passed to a component as attributes in JSX.</p>","tags":["Frontend Development"]},{"location":"Frontend%20Development/concepts/#state","title":"State","text":"<p>State is the way to store data inside a component. It is mutable and can be changed by the component itself.</p> <p>You can initialize and use state using the <code>useState()</code> hook like this:</p> <pre><code>const [counter, setCounter] = useState(0); // initialize with 0\nsetCounter(counter + 1); // increase counter by 1\n</code></pre>","tags":["Frontend Development"]},{"location":"Frontend%20Development/concepts/#hooks","title":"Hooks","text":"<p>Hooks are a new feature that was introduced in React 16.8. They allow you to use state and other React features without writing a class. Hooks are functions that can be called inside functional components. They allow you to use state and other React features without writing a class.</p>","tags":["Frontend Development"]},{"location":"Frontend%20Development/concepts/#typescript","title":"TypeScript","text":"<p>The Telestion frontend is written in TypeScript. TypeScript is a superset of JavaScript that adds static typing to the language. It is a strict superset of JavaScript, which means that any valid JavaScript code is also valid TypeScript code. TypeScript is a statically typed language, which means that the type of a variable is known at compile time. This allows the compiler to catch many errors at compile time instead of at runtime.</p>","tags":["Frontend Development"]},{"location":"Frontend%20Development/developing-widgets/","title":"Developing Widgets","text":"<p>This section provides a brief overview of how to develop custom widgets for Telestion\u2019s frontend. Widgets are reusable components that can be integrated into the Telestion dashboard to display data, visualizations, or interactive elements.</p> <p>Note</p> <p>This is a temporary documentation page. It will be split into multiple pages and improved in the future.</p>","tags":["Frontend Development","Widgets"]},{"location":"Frontend%20Development/developing-widgets/#defining-widgets","title":"Defining Widgets","text":"<p>A widget is, at its core, nothing more than a JS object containing various properties that define its behavior and appearance. The required properties of a widget include:</p> <ul> <li><code>id</code>: A unique identifier for the widget.</li> <li><code>label</code>: A human-readable name for the widget.</li> <li><code>element</code>: The React component that renders the widget\u2019s UI.</li> <li><code>createConfig</code>: A function that returns the default configuration for the widget.</li> </ul> <p>See full API Reference for Widget Definition</p>","tags":["Frontend Development","Widgets"]},{"location":"Frontend%20Development/developing-widgets/#creating-a-widget","title":"Creating a Widget","text":"<p>Create a new TypeScript file for your widget, e.g., <code>MyCustomWidget.tsx</code>, and define your widget as follows:</p> <pre><code>import { Widget } from '@wuespace/telestion';\n\nexport const MyCustomWidget: Widget = {\n  id: 'my-custom-widget',\n  label: 'My Custom Widget',\n  element: &lt;div&gt;Hello World!&lt;/div&gt;,\n  createConfig: (oldConfig) =&gt; ({\n    // Default configuration properties\n  })\n}\n</code></pre>","tags":["Frontend Development","Widgets"]},{"location":"Frontend%20Development/developing-widgets/#registering-the-widget","title":"Registering the Widget","text":"<p>To make your widget available in the Telestion dashboard, you need to register it in the widget registry. This is typically done in the main application file or a dedicated widget registration module.</p> <p>If your following the guide in this documentation, update the <code>registerWidgets()</code> function at the bottom of the <code>index.ts</code> file as follows:</p> <pre><code>import { MyCustomWidget } from './MyCustomWidget';\n\nregisterWidgets(\n  MyCustomWidget,\n  // other widgets...\n);\n</code></pre>","tags":["Frontend Development","Widgets"]},{"location":"Frontend%20Development/developing-widgets/#interacting-with-the-message-bus","title":"Interacting with the message bus","text":"<p>Since the library manages anything related to establishing a connection to the message bus, widgets can easily interact with it by using the provided hooks. Replace the <code>&lt;div&gt;</code> in your element with a new, functional react component:</p> <pre><code>import { useNatsSubscription } from \"@wuespace/telestion/auth\";\nimport { Widget } from '@wuespace/telestion';\nimport React, { useState } from 'react';\n\nfunction MyWidgetComponent() {\n  const [latestMessage, setLatestMessage] = useState('No data yet');\n  useNatsSubscription('some.subject', (msg) =&gt; {\n    setLatestMessage(msg.value);\n  });\n\n  return &lt;div&gt;Received value: {latestMessage}&lt;/div&gt;;\n}\n\nexport const MyCustomWidget: Widget = {\n  id: 'my-custom-widget',\n  label: 'My Custom Widget',\n  element: &lt;MyWidgetComponent /&gt;,\n  createConfig: (oldConfig) =&gt; ({\n    // Default configuration properties\n  })\n}\n</code></pre> <p>Now, whenever a message is published to the subject <code>some.subject</code>, your widget will update and display the latest value.</p> <p>Note that you can access all features of the NATS web client using the <code>useNats()</code> hook, which returns the NATS connection instance.</p>","tags":["Frontend Development","Widgets"]},{"location":"Frontend%20Development/developing-widgets/#next-steps","title":"Next Steps","text":"<p>Browse Widget Samples</p>","tags":["Frontend Development","Widgets"]},{"location":"Frontend%20Development/api/","title":"Index","text":"<p>The Telestion Frontend Library.</p> <p>Import this library to use the Telestion Frontend:</p> <pre><code>import { initTelestion } from '@wuespace/telestion';\n</code></pre> <p>The most important function is initTelestion. It initializes the Telestion Frontend and renders the application.</p> <pre><code>initTelestion({\n  version: '1.0.0',\n  ...\n});\n</code></pre>"},{"location":"Frontend%20Development/api/#see","title":"See","text":"<p>initTelestion</p>"},{"location":"Frontend%20Development/api/#interfaces","title":"Interfaces","text":""},{"location":"Frontend%20Development/api/#telestionoptions","title":"TelestionOptions","text":"<p>Represents the options for Telestion.</p>"},{"location":"Frontend%20Development/api/#properties","title":"Properties","text":""},{"location":"Frontend%20Development/api/#defaultbackendurl","title":"defaultBackendUrl?","text":"<pre><code>optional defaultBackendUrl: string;\n</code></pre> <p>The backend URL that should be inserted by default on first page load.</p> <p></p>"},{"location":"Frontend%20Development/api/#defaultuserdata","title":"defaultUserData?","text":"<pre><code>optional defaultUserData: object;\n</code></pre> <p>Represents the default user data.</p> <p></p>"},{"location":"Frontend%20Development/api/#dashboards","title":"dashboards","text":"<pre><code>dashboards: Record&lt;string, {\n  layout: string[][];\n  title: string;\n}&gt;;\n</code></pre> <p>The user\u2019s dashboards.</p> <p></p>"},{"location":"Frontend%20Development/api/#version","title":"version","text":"<pre><code>version: string;\n</code></pre> <p>The version of the client that created this user data.</p> <p></p>"},{"location":"Frontend%20Development/api/#widgetinstances","title":"widgetInstances","text":"<pre><code>widgetInstances: Record&lt;string, {\n  configuration: Record&lt;string, Json&gt;;\n  type: string;\n}&gt;;\n</code></pre> <p>The user\u2019s widget instances.</p> <p></p>"},{"location":"Frontend%20Development/api/#version_1","title":"version","text":"<pre><code>version: string;\n</code></pre> <p>Represents the current version of the software.</p> <p></p>"},{"location":"Frontend%20Development/api/#widgets","title":"widgets?","text":"<pre><code>optional widgets: Widget&lt;Record&lt;string, Json&gt;&gt;[];\n</code></pre> <p>Represents an array of widgets.</p> <p></p>"},{"location":"Frontend%20Development/api/#widgett","title":"Widget&lt;T&gt;","text":"<p>A widget that can be used in widget instances on dashboards.</p>"},{"location":"Frontend%20Development/api/#see_1","title":"See","text":"<p>userData.WidgetInstance</p>"},{"location":"Frontend%20Development/api/#type-parameters","title":"Type Parameters","text":"<p>\u2022 T extends <code>BaseWidgetConfiguration</code> = <code>BaseWidgetConfiguration</code></p> <p>the type of the widget configuration</p>"},{"location":"Frontend%20Development/api/#properties_1","title":"Properties","text":""},{"location":"Frontend%20Development/api/#configelement","title":"configElement","text":"<pre><code>configElement: ReactNode;\n</code></pre> <p>A configuration element that is used to configure the widget.</p> <p></p>"},{"location":"Frontend%20Development/api/#element","title":"element","text":"<pre><code>element: ReactNode;\n</code></pre> <p>A function that takes the configuration of the widget and returns a React element that represents the widget.</p> <p></p>"},{"location":"Frontend%20Development/api/#id","title":"id","text":"<pre><code>id: string;\n</code></pre> <p>Represents an identifier of the widget type.</p> <p></p>"},{"location":"Frontend%20Development/api/#label","title":"label","text":"<pre><code>label: string;\n</code></pre> <p>Represents a human-readable label of the widget type.</p>"},{"location":"Frontend%20Development/api/#methods","title":"Methods","text":""},{"location":"Frontend%20Development/api/#createconfig","title":"createConfig()","text":"<pre><code>createConfig(input): T\n</code></pre> <p>A function that takes an object that contains the previous widget configuration (which may or may not be from a previous version of the client (or could also, when creating new widget instances, be empty) and returns a valid configuration for the widget.</p> <p>For widgets with expected breaking changes, it is therefore useful to have some version identifier be a part of the configuration options to enable more complex migration logic in this function.</p>"},{"location":"Frontend%20Development/api/#parameters","title":"Parameters","text":""},{"location":"Frontend%20Development/api/#input","title":"input","text":"<p><code>Partial</code>&lt;<code>T</code>&gt; &amp; <code>Record</code>&lt;<code>string</code>, <code>Json</code>&gt;</p> <p>previous configuration or empty</p>"},{"location":"Frontend%20Development/api/#returns","title":"Returns","text":"<p><code>T</code></p>"},{"location":"Frontend%20Development/api/#type-aliases","title":"Type Aliases","text":""},{"location":"Frontend%20Development/api/#userdata","title":"UserData","text":"<pre><code>type UserData: object;\n</code></pre> <p>Represents the user data.</p>"},{"location":"Frontend%20Development/api/#type-declaration","title":"Type declaration","text":""},{"location":"Frontend%20Development/api/#dashboards_1","title":"dashboards","text":"<pre><code>dashboards: Record&lt;string, {\n  layout: string[][];\n  title: string;\n}&gt;;\n</code></pre> <p>The user\u2019s dashboards.</p> <p></p>"},{"location":"Frontend%20Development/api/#version_2","title":"version","text":"<pre><code>version: string;\n</code></pre> <p>The version of the client that created this user data.</p> <p></p>"},{"location":"Frontend%20Development/api/#widgetinstances_1","title":"widgetInstances","text":"<pre><code>widgetInstances: Record&lt;string, {\n  configuration: Record&lt;string, Json&gt;;\n  type: string;\n}&gt;;\n</code></pre> <p>The user\u2019s widget instances.</p>"},{"location":"Frontend%20Development/api/#see_2","title":"See","text":"<p>userDataSchema</p>"},{"location":"Frontend%20Development/api/#functions","title":"Functions","text":""},{"location":"Frontend%20Development/api/#jsoncodec","title":"JSONCodec()","text":"<pre><code>function JSONCodec&lt;T&gt;(reviver?): Codec&lt;T&gt;\n</code></pre> <p>Returns a Codec  for encoding JavaScript object to JSON and serialize them to an Uint8Array, and conversely, from an Uint8Array to JSON to a JavaScript Object.</p>"},{"location":"Frontend%20Development/api/#type-parameters_1","title":"Type Parameters","text":"<p>\u2022 T = <code>unknown</code></p>"},{"location":"Frontend%20Development/api/#parameters_1","title":"Parameters","text":""},{"location":"Frontend%20Development/api/#reviver","title":"reviver?","text":"<p>(<code>this</code>, <code>key</code>, <code>value</code>) =&gt; <code>unknown</code></p>"},{"location":"Frontend%20Development/api/#returns_1","title":"Returns","text":"<p><code>Codec</code>&lt;<code>T</code>&gt;</p> <p></p>"},{"location":"Frontend%20Development/api/#registerwidgets","title":"registerWidgets()","text":"<pre><code>function registerWidgets(...widgets): void\n</code></pre> <p>Registers widgets in the widget store.</p> <p>If a widget with the same ID already exists in the widget store, a warning is logged and the widget is ignored.</p>"},{"location":"Frontend%20Development/api/#parameters_2","title":"Parameters","text":""},{"location":"Frontend%20Development/api/#widgets_1","title":"widgets","text":"<p>\u2026<code>Widget</code>&lt;<code>Record</code>&lt;<code>string</code>, <code>Json</code>&gt;&gt;[]</p> <p>The widgets to be registered.</p>"},{"location":"Frontend%20Development/api/#returns_2","title":"Returns","text":"<p><code>void</code></p> <p></p>"},{"location":"Frontend%20Development/api/#usenats","title":"useNats()","text":"<pre><code>function useNats(): NatsConnection\n</code></pre>"},{"location":"Frontend%20Development/api/#returns_3","title":"Returns","text":"<p><code>NatsConnection</code></p> <p></p>"},{"location":"Frontend%20Development/api/#usewidgetconfig","title":"useWidgetConfig()","text":"<pre><code>function useWidgetConfig&lt;T&gt;(): T\n</code></pre> <p>Retrieves the widget configuration from the widgetConfigContext.</p>"},{"location":"Frontend%20Development/api/#type-parameters_2","title":"Type Parameters","text":"<p>\u2022 T</p> <p>The type of the widget configuration.</p>"},{"location":"Frontend%20Development/api/#returns_4","title":"Returns","text":"<p><code>T</code></p> <p>The widget configuration retrieved from the widgetConfigContext.</p>"},{"location":"Frontend%20Development/api/#throws","title":"Throws","text":"<p>Error Throws an error if useWidgetConfig is not used within a WidgetConfigProvider.</p>"},{"location":"Frontend%20Development/api/#references","title":"References","text":""},{"location":"Frontend%20Development/api/#inittelestion","title":"initTelestion","text":"<p>Re-exports initTelestion</p>"},{"location":"Frontend%20Development/api/application/","title":"Application","text":"<p>This package provides the main entry point for the Telestion frontend application.</p> <p>You can initialize the application by calling the initTelestion function.</p>"},{"location":"Frontend%20Development/api/application/#example","title":"Example","text":"<pre><code>import { initTelestion } from '@wuespace/telestion/application';\n// or, for convenience:\n// import { initTelestion } from '@wuespace/telestion';\n\ninitTelestion({ ... });\n</code></pre>"},{"location":"Frontend%20Development/api/application/#functions","title":"Functions","text":""},{"location":"Frontend%20Development/api/application/#inittelestion","title":"initTelestion()","text":"<pre><code>function initTelestion(options): Promise&lt;void&gt;\n</code></pre> <p>Initialize the Telestion application.</p>"},{"location":"Frontend%20Development/api/application/#parameters","title":"Parameters","text":""},{"location":"Frontend%20Development/api/application/#options","title":"options","text":"<p><code>TelestionOptions</code></p> <p>The options for initializing the application.</p>"},{"location":"Frontend%20Development/api/application/#returns","title":"Returns","text":"<p><code>Promise</code>&lt;<code>void</code>&gt;</p> <p>A Promise that resolves once the initialization is completed.</p>"},{"location":"Frontend%20Development/api/application/#references","title":"References","text":""},{"location":"Frontend%20Development/api/application/#telestionoptions","title":"TelestionOptions","text":"<p>Re-exports TelestionOptions</p> <p></p>"},{"location":"Frontend%20Development/api/application/#usewidgetconfig","title":"useWidgetConfig","text":"<p>Re-exports useWidgetConfig</p>"},{"location":"Frontend%20Development/api/auth/","title":"Auth","text":"<p>Functions and types relating to the authentication of users in the Telestion frontend.</p> <p>Note that in most cases, you don\u2019t need to import anything from this package directly, since auth*n is already handled by the framework itself.</p>"},{"location":"Frontend%20Development/api/auth/#example","title":"Example","text":"<pre><code>import { ... } from '@wuespace/telestion/auth';\n</code></pre>"},{"location":"Frontend%20Development/api/auth/#classes","title":"Classes","text":""},{"location":"Frontend%20Development/api/auth/#loginerror","title":"LoginError","text":""},{"location":"Frontend%20Development/api/auth/#extends","title":"Extends","text":"<ul> <li><code>Error</code></li> </ul>"},{"location":"Frontend%20Development/api/auth/#constructors","title":"Constructors","text":""},{"location":"Frontend%20Development/api/auth/#new-loginerror","title":"new LoginError()","text":"<pre><code>new LoginError(messages): LoginError\n</code></pre>"},{"location":"Frontend%20Development/api/auth/#parameters","title":"Parameters","text":""},{"location":"Frontend%20Development/api/auth/#messages","title":"messages","text":"<p><code>ErrorMessages</code></p>"},{"location":"Frontend%20Development/api/auth/#returns","title":"Returns","text":"<p><code>LoginError</code></p>"},{"location":"Frontend%20Development/api/auth/#overrides","title":"Overrides","text":"<p><code>Error.constructor</code></p>"},{"location":"Frontend%20Development/api/auth/#properties","title":"Properties","text":""},{"location":"Frontend%20Development/api/auth/#message","title":"message","text":"<pre><code>message: string;\n</code></pre>"},{"location":"Frontend%20Development/api/auth/#inherited-from","title":"Inherited from","text":"<p><code>Error.message</code></p> <p></p>"},{"location":"Frontend%20Development/api/auth/#messages_1","title":"messages","text":"<pre><code>messages: ErrorMessages;\n</code></pre>"},{"location":"Frontend%20Development/api/auth/#name","title":"name","text":"<pre><code>name: string;\n</code></pre>"},{"location":"Frontend%20Development/api/auth/#inherited-from_1","title":"Inherited from","text":"<p><code>Error.name</code></p> <p></p>"},{"location":"Frontend%20Development/api/auth/#stack","title":"stack?","text":"<pre><code>optional stack: string;\n</code></pre>"},{"location":"Frontend%20Development/api/auth/#inherited-from_2","title":"Inherited from","text":"<p><code>Error.stack</code></p> <p></p>"},{"location":"Frontend%20Development/api/auth/#preparestacktrace","title":"prepareStackTrace()?","text":"<pre><code>static optional prepareStackTrace: (err, stackTraces) =&gt; any;\n</code></pre> <p>Optional override for formatting stack traces</p>"},{"location":"Frontend%20Development/api/auth/#parameters_1","title":"Parameters","text":""},{"location":"Frontend%20Development/api/auth/#err","title":"err","text":"<p><code>Error</code></p>"},{"location":"Frontend%20Development/api/auth/#stacktraces","title":"stackTraces","text":"<p><code>CallSite</code>[]</p>"},{"location":"Frontend%20Development/api/auth/#returns_1","title":"Returns","text":"<p><code>any</code></p>"},{"location":"Frontend%20Development/api/auth/#see","title":"See","text":"<p>https://v8.dev/docs/stack-trace-api#customizing-stack-traces</p>"},{"location":"Frontend%20Development/api/auth/#inherited-from_3","title":"Inherited from","text":"<p><code>Error.prepareStackTrace</code></p> <p></p>"},{"location":"Frontend%20Development/api/auth/#stacktracelimit","title":"stackTraceLimit","text":"<pre><code>static stackTraceLimit: number;\n</code></pre>"},{"location":"Frontend%20Development/api/auth/#inherited-from_4","title":"Inherited from","text":"<p><code>Error.stackTraceLimit</code></p>"},{"location":"Frontend%20Development/api/auth/#methods","title":"Methods","text":""},{"location":"Frontend%20Development/api/auth/#capturestacktrace","title":"captureStackTrace()","text":"<pre><code>static captureStackTrace(targetObject, constructorOpt?): void\n</code></pre> <p>Create .stack property on a target object</p>"},{"location":"Frontend%20Development/api/auth/#parameters_2","title":"Parameters","text":""},{"location":"Frontend%20Development/api/auth/#targetobject","title":"targetObject","text":"<p><code>object</code></p>"},{"location":"Frontend%20Development/api/auth/#constructoropt","title":"constructorOpt?","text":"<p><code>Function</code></p>"},{"location":"Frontend%20Development/api/auth/#returns_2","title":"Returns","text":"<p><code>void</code></p>"},{"location":"Frontend%20Development/api/auth/#inherited-from_5","title":"Inherited from","text":"<p><code>Error.captureStackTrace</code></p>"},{"location":"Frontend%20Development/api/auth/#interfaces","title":"Interfaces","text":""},{"location":"Frontend%20Development/api/auth/#errormessages","title":"ErrorMessages","text":""},{"location":"Frontend%20Development/api/auth/#properties_1","title":"Properties","text":""},{"location":"Frontend%20Development/api/auth/#natsurlmessage","title":"natsUrlMessage?","text":"<pre><code>optional natsUrlMessage: string;\n</code></pre>"},{"location":"Frontend%20Development/api/auth/#passwordmessage","title":"passwordMessage?","text":"<pre><code>optional passwordMessage: string;\n</code></pre>"},{"location":"Frontend%20Development/api/auth/#usernamemessage","title":"usernameMessage?","text":"<pre><code>optional usernameMessage: string;\n</code></pre>"},{"location":"Frontend%20Development/api/auth/#user","title":"User","text":"<p>A logged-in user.</p>"},{"location":"Frontend%20Development/api/auth/#properties_2","title":"Properties","text":""},{"location":"Frontend%20Development/api/auth/#natsurl","title":"natsUrl","text":"<pre><code>natsUrl: string;\n</code></pre> <p>The NATS URL that the user is connected to.</p> <p></p>"},{"location":"Frontend%20Development/api/auth/#username","title":"username","text":"<pre><code>username: string;\n</code></pre> <p>The user\u2019s username.</p>"},{"location":"Frontend%20Development/api/auth/#functions","title":"Functions","text":""},{"location":"Frontend%20Development/api/auth/#attemptautologin","title":"attemptAutoLogin()","text":"<pre><code>function attemptAutoLogin(): Promise&lt;boolean&gt;\n</code></pre> <p>Attempt to auto-login using credentials stored in sessionStorage.</p> <p>The credentials will automatically be cleared if they are invalid, the session ends, or logout is called.</p> <p>Credentials are automatically stored updated by login and logout.</p>"},{"location":"Frontend%20Development/api/auth/#returns_3","title":"Returns","text":"<p><code>Promise</code>&lt;<code>boolean</code>&gt;</p> <p>true if auto-login was successful, false otherwise</p> <p></p>"},{"location":"Frontend%20Development/api/auth/#getnatsconnection","title":"getNatsConnection()","text":"<pre><code>function getNatsConnection(): null | NatsConnection\n</code></pre>"},{"location":"Frontend%20Development/api/auth/#returns_4","title":"Returns","text":"<p><code>null</code> | <code>NatsConnection</code></p> <p></p>"},{"location":"Frontend%20Development/api/auth/#getuser","title":"getUser()","text":"<pre><code>function getUser(): null | User\n</code></pre> <p>Returns the user object if the user is currently logged in, else returns <code>null</code> if no user is currently logged in.</p>"},{"location":"Frontend%20Development/api/auth/#returns_5","title":"Returns","text":"<p><code>null</code> | <code>User</code></p> <p></p>"},{"location":"Frontend%20Development/api/auth/#isloggedin","title":"isLoggedIn()","text":"<pre><code>function isLoggedIn(): boolean\n</code></pre> <p>Checks if a user is logged in.</p>"},{"location":"Frontend%20Development/api/auth/#returns_6","title":"Returns","text":"<p><code>boolean</code></p> <p><code>true</code> if the user is logged in, <code>false</code> otherwise.</p> <p></p>"},{"location":"Frontend%20Development/api/auth/#login","title":"login()","text":"<pre><code>function login(\n   natsUrl, \n   username, \npassword): Promise&lt;null | User&gt;\n</code></pre> <p>Logs in a user with the given credentials.</p>"},{"location":"Frontend%20Development/api/auth/#parameters_3","title":"Parameters","text":""},{"location":"Frontend%20Development/api/auth/#natsurl_1","title":"natsUrl","text":"<p><code>string</code></p> <p>The url to connect to the NATS server.</p>"},{"location":"Frontend%20Development/api/auth/#username_1","title":"username","text":"<p><code>string</code></p> <p>The username for authentication.</p>"},{"location":"Frontend%20Development/api/auth/#password","title":"password","text":"<p><code>string</code></p> <p>The password for authentication.</p>"},{"location":"Frontend%20Development/api/auth/#returns_7","title":"Returns","text":"<p><code>Promise</code>&lt;<code>null</code> | <code>User</code>&gt;</p> <p>A promise that resolves once the user is logged in. The resolved value is the logged-in user object.</p>"},{"location":"Frontend%20Development/api/auth/#throws","title":"Throws","text":"<p>Error If the provided credentials are incorrect.</p> <p></p>"},{"location":"Frontend%20Development/api/auth/#logout","title":"logout()","text":"<pre><code>function logout(): Promise&lt;void&gt;\n</code></pre> <p>Logs out the user if currently logged in.</p>"},{"location":"Frontend%20Development/api/auth/#returns_8","title":"Returns","text":"<p><code>Promise</code>&lt;<code>void</code>&gt;</p> <p>A promise that resolves once the user is logged out.</p> <p></p>"},{"location":"Frontend%20Development/api/auth/#setautologincredentials","title":"~~setAutoLoginCredentials()~~","text":"<pre><code>function setAutoLoginCredentials(credentials): void\n</code></pre> <p>Sets credentials with which to auto-login.</p> <p>If an auto-login attempt fails, the credentials will be cleared for the remainder of the session and a login form shown to the user. If the user logs in successfully, the credentials will be updated.</p>"},{"location":"Frontend%20Development/api/auth/#security-warning","title":"Security Warning","text":"<p>Use this function only if user authentication is handled by a separate system. Calling this function in your application means your NATS credentials will be hard-coded into your application, which is a security risk.</p>"},{"location":"Frontend%20Development/api/auth/#parameters_4","title":"Parameters","text":""},{"location":"Frontend%20Development/api/auth/#credentials","title":"credentials","text":"<p>The credentials to store</p>"},{"location":"Frontend%20Development/api/auth/#natsurl_2","title":"natsUrl","text":"<p><code>string</code> = <code>...</code></p> <p>The URL of the NATS server to connect to.</p>"},{"location":"Frontend%20Development/api/auth/#password_1","title":"password","text":"<p><code>string</code> = <code>...</code></p> <p>The password to use when connecting to the NATS server.</p>"},{"location":"Frontend%20Development/api/auth/#username_2","title":"username","text":"<p><code>string</code> = <code>...</code></p> <p>The username to use when connecting to the NATS server.</p>"},{"location":"Frontend%20Development/api/auth/#returns_9","title":"Returns","text":"<p><code>void</code></p>"},{"location":"Frontend%20Development/api/auth/#deprecated","title":"Deprecated","text":"<p>No, this won\u2019t be removed anytime soon. You can ignore this warning if you\u2019re aware of the security implications.</p> <p></p>"},{"location":"Frontend%20Development/api/auth/#setnatsconnection","title":"setNatsConnection()","text":"<pre><code>function setNatsConnection(nc): void\n</code></pre>"},{"location":"Frontend%20Development/api/auth/#parameters_5","title":"Parameters","text":""},{"location":"Frontend%20Development/api/auth/#nc","title":"nc","text":"<p><code>null</code> | <code>NatsConnection</code></p>"},{"location":"Frontend%20Development/api/auth/#returns_10","title":"Returns","text":"<p><code>void</code></p> <p></p>"},{"location":"Frontend%20Development/api/auth/#setuser","title":"setUser()","text":"<pre><code>function setUser(user): void\n</code></pre> <p>Sets a new user object or <code>null</code> if the user is no longer logged in.</p>"},{"location":"Frontend%20Development/api/auth/#parameters_6","title":"Parameters","text":""},{"location":"Frontend%20Development/api/auth/#user_1","title":"user","text":"<p>the user object or <code>null</code></p> <p><code>null</code> | <code>User</code></p>"},{"location":"Frontend%20Development/api/auth/#returns_11","title":"Returns","text":"<p><code>void</code></p> <p></p>"},{"location":"Frontend%20Development/api/auth/#usenatssubscription","title":"useNatsSubscription()","text":"<pre><code>function useNatsSubscription(\n   subject, \n   callback, \n   options?): void\n</code></pre>"},{"location":"Frontend%20Development/api/auth/#parameters_7","title":"Parameters","text":""},{"location":"Frontend%20Development/api/auth/#subject","title":"subject","text":"<p><code>string</code></p>"},{"location":"Frontend%20Development/api/auth/#callback","title":"callback","text":"<p>(<code>message</code>) =&gt; <code>void</code> | <code>Promise</code>&lt;<code>void</code>&gt;</p>"},{"location":"Frontend%20Development/api/auth/#options","title":"options?","text":"<p><code>SubscriptionOptions</code></p>"},{"location":"Frontend%20Development/api/auth/#returns_12","title":"Returns","text":"<p><code>void</code></p>"},{"location":"Frontend%20Development/api/auth/#references","title":"References","text":""},{"location":"Frontend%20Development/api/auth/#usenats","title":"useNats","text":"<p>Re-exports useNats</p>"},{"location":"Frontend%20Development/api/nats/","title":"Nats","text":"<p>Re-exporting the most used types and functions from the <code>nats.ws</code> package.</p>"},{"location":"Frontend%20Development/api/nats/#example","title":"Example","text":"<pre><code>import { Msg, JSONCodec, ... } from '@wuespace/telestion/nats';\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#see","title":"See","text":"<ul> <li>https://docs.nats.io/using-nats/developer</li> <li>https://github.com/nats-io/nats.ws#readme</li> </ul>"},{"location":"Frontend%20Development/api/nats/#classes","title":"Classes","text":""},{"location":"Frontend%20Development/api/nats/#natserror","title":"NatsError","text":""},{"location":"Frontend%20Development/api/nats/#extends","title":"Extends","text":"<ul> <li><code>Error</code></li> </ul>"},{"location":"Frontend%20Development/api/nats/#constructors","title":"Constructors","text":""},{"location":"Frontend%20Development/api/nats/#new-natserror","title":"new NatsError()","text":"<pre><code>new NatsError(\n   message, \n   code, \n   chainedError?): NatsError\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#parameters","title":"Parameters","text":""},{"location":"Frontend%20Development/api/nats/#message","title":"message","text":"<p><code>string</code></p>"},{"location":"Frontend%20Development/api/nats/#code","title":"code","text":"<p><code>string</code></p>"},{"location":"Frontend%20Development/api/nats/#chainederror","title":"chainedError?","text":"<p><code>Error</code></p>"},{"location":"Frontend%20Development/api/nats/#returns","title":"Returns","text":"<p><code>NatsError</code></p>"},{"location":"Frontend%20Development/api/nats/#api","title":"Api","text":"<p>private</p>"},{"location":"Frontend%20Development/api/nats/#overrides","title":"Overrides","text":"<p><code>Error.constructor</code></p>"},{"location":"Frontend%20Development/api/nats/#properties","title":"Properties","text":""},{"location":"Frontend%20Development/api/nats/#api_error","title":"api_error?","text":"<pre><code>optional api_error: ApiError;\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#chainederror_1","title":"chainedError?","text":"<pre><code>optional chainedError: Error;\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#code_1","title":"code","text":"<pre><code>code: string;\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#message_1","title":"message","text":"<pre><code>message: string;\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#overrides_1","title":"Overrides","text":"<p><code>Error.message</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#name","title":"name","text":"<pre><code>name: string;\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#overrides_2","title":"Overrides","text":"<p><code>Error.name</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#permissioncontext","title":"permissionContext?","text":"<pre><code>optional permissionContext: object;\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#operation","title":"operation","text":"<pre><code>operation: string;\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#queue","title":"queue?","text":"<pre><code>optional queue: string;\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#subject","title":"subject","text":"<pre><code>subject: string;\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#stack","title":"stack?","text":"<pre><code>optional stack: string;\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#inherited-from","title":"Inherited from","text":"<p><code>Error.stack</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#preparestacktrace","title":"prepareStackTrace()?","text":"<pre><code>static optional prepareStackTrace: (err, stackTraces) =&gt; any;\n</code></pre> <p>Optional override for formatting stack traces</p>"},{"location":"Frontend%20Development/api/nats/#parameters_1","title":"Parameters","text":""},{"location":"Frontend%20Development/api/nats/#err","title":"err","text":"<p><code>Error</code></p>"},{"location":"Frontend%20Development/api/nats/#stacktraces","title":"stackTraces","text":"<p><code>CallSite</code>[]</p>"},{"location":"Frontend%20Development/api/nats/#returns_1","title":"Returns","text":"<p><code>any</code></p>"},{"location":"Frontend%20Development/api/nats/#see_1","title":"See","text":"<p>https://v8.dev/docs/stack-trace-api#customizing-stack-traces</p>"},{"location":"Frontend%20Development/api/nats/#inherited-from_1","title":"Inherited from","text":"<p><code>Error.prepareStackTrace</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#stacktracelimit","title":"stackTraceLimit","text":"<pre><code>static stackTraceLimit: number;\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#inherited-from_2","title":"Inherited from","text":"<p><code>Error.stackTraceLimit</code></p>"},{"location":"Frontend%20Development/api/nats/#methods","title":"Methods","text":""},{"location":"Frontend%20Development/api/nats/#isautherror","title":"isAuthError()","text":"<pre><code>isAuthError(): boolean\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#returns_2","title":"Returns","text":"<p><code>boolean</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#isauthtimeout","title":"isAuthTimeout()","text":"<pre><code>isAuthTimeout(): boolean\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#returns_3","title":"Returns","text":"<p><code>boolean</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#isjetstreamerror","title":"isJetStreamError()","text":"<pre><code>isJetStreamError(): boolean\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#returns_4","title":"Returns","text":"<p><code>boolean</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#ispermissionerror","title":"isPermissionError()","text":"<pre><code>isPermissionError(): boolean\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#returns_5","title":"Returns","text":"<p><code>boolean</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#isprotocolerror","title":"isProtocolError()","text":"<pre><code>isProtocolError(): boolean\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#returns_6","title":"Returns","text":"<p><code>boolean</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#jserror","title":"jsError()","text":"<pre><code>jsError(): null | ApiError\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#returns_7","title":"Returns","text":"<p><code>null</code> | <code>ApiError</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#capturestacktrace","title":"captureStackTrace()","text":"<pre><code>static captureStackTrace(targetObject, constructorOpt?): void\n</code></pre> <p>Create .stack property on a target object</p>"},{"location":"Frontend%20Development/api/nats/#parameters_2","title":"Parameters","text":""},{"location":"Frontend%20Development/api/nats/#targetobject","title":"targetObject","text":"<p><code>object</code></p>"},{"location":"Frontend%20Development/api/nats/#constructoropt","title":"constructorOpt?","text":"<p><code>Function</code></p>"},{"location":"Frontend%20Development/api/nats/#returns_8","title":"Returns","text":"<p><code>void</code></p>"},{"location":"Frontend%20Development/api/nats/#inherited-from_3","title":"Inherited from","text":"<p><code>Error.captureStackTrace</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#errorforcode","title":"errorForCode()","text":"<pre><code>static errorForCode(code, chainedError?): NatsError\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#parameters_3","title":"Parameters","text":""},{"location":"Frontend%20Development/api/nats/#code_2","title":"code","text":"<p><code>string</code></p>"},{"location":"Frontend%20Development/api/nats/#chainederror_2","title":"chainedError?","text":"<p><code>Error</code></p>"},{"location":"Frontend%20Development/api/nats/#returns_9","title":"Returns","text":"<p><code>NatsError</code></p>"},{"location":"Frontend%20Development/api/nats/#interfaces","title":"Interfaces","text":""},{"location":"Frontend%20Development/api/nats/#codect","title":"Codec&lt;T&gt;","text":""},{"location":"Frontend%20Development/api/nats/#type-parameters","title":"Type Parameters","text":"<p>\u2022 T</p>"},{"location":"Frontend%20Development/api/nats/#methods_1","title":"Methods","text":""},{"location":"Frontend%20Development/api/nats/#decode","title":"decode()","text":"<pre><code>decode(a): T\n</code></pre> <p>Decode an Uint8Array from a message payload into a T</p>"},{"location":"Frontend%20Development/api/nats/#parameters_4","title":"Parameters","text":""},{"location":"Frontend%20Development/api/nats/#a","title":"a","text":"<p><code>Uint8Array</code>&lt;<code>ArrayBufferLike</code>&gt;</p>"},{"location":"Frontend%20Development/api/nats/#returns_10","title":"Returns","text":"<p><code>T</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#encode","title":"encode()","text":"<pre><code>encode(d): Uint8Array&lt;ArrayBufferLike&gt;\n</code></pre> <p>Encode T to an Uint8Array suitable for including in a message payload.</p>"},{"location":"Frontend%20Development/api/nats/#parameters_5","title":"Parameters","text":""},{"location":"Frontend%20Development/api/nats/#d","title":"d","text":"<p><code>T</code></p>"},{"location":"Frontend%20Development/api/nats/#returns_11","title":"Returns","text":"<p><code>Uint8Array</code>&lt;<code>ArrayBufferLike</code>&gt;</p> <p></p>"},{"location":"Frontend%20Development/api/nats/#msg","title":"Msg","text":"<p>Represents a message delivered by NATS. This interface is used by Subscribers.</p>"},{"location":"Frontend%20Development/api/nats/#properties_1","title":"Properties","text":""},{"location":"Frontend%20Development/api/nats/#data","title":"data","text":"<pre><code>data: Uint8Array&lt;ArrayBufferLike&gt;;\n</code></pre> <p>The message\u2019s data (or payload)</p> <p></p>"},{"location":"Frontend%20Development/api/nats/#headers","title":"headers?","text":"<pre><code>optional headers: MsgHdrs;\n</code></pre> <p>Possible headers that may have been set by the server or the publisher.</p> <p></p>"},{"location":"Frontend%20Development/api/nats/#reply","title":"reply?","text":"<pre><code>optional reply: string;\n</code></pre> <p>A possible subject where the recipient may publish a reply (in the cases where the message represents a request).</p> <p></p>"},{"location":"Frontend%20Development/api/nats/#sid","title":"sid","text":"<pre><code>sid: number;\n</code></pre> <p>The subscription ID where the message was dispatched.</p> <p></p>"},{"location":"Frontend%20Development/api/nats/#subject_1","title":"subject","text":"<pre><code>subject: string;\n</code></pre> <p>The subject the message was sent to</p>"},{"location":"Frontend%20Development/api/nats/#methods_2","title":"Methods","text":""},{"location":"Frontend%20Development/api/nats/#json","title":"json()","text":"<pre><code>json&lt;T&gt;(reviver?): T\n</code></pre> <p>Convenience method to parse the message payload as JSON. This method will throw an exception if there\u2019s a parsing error;</p>"},{"location":"Frontend%20Development/api/nats/#type-parameters_1","title":"Type Parameters","text":"<p>\u2022 T</p>"},{"location":"Frontend%20Development/api/nats/#parameters_6","title":"Parameters","text":""},{"location":"Frontend%20Development/api/nats/#reviver","title":"reviver?","text":"<p><code>ReviverFn</code></p> <p>a reviver function</p>"},{"location":"Frontend%20Development/api/nats/#returns_12","title":"Returns","text":"<p><code>T</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#respond","title":"respond()","text":"<pre><code>respond(payload?, opts?): boolean\n</code></pre> <p>Convenience to publish a response to the reply subject in the message - this is the same as doing <code>nc.publish(msg.reply, ...)</code>.</p>"},{"location":"Frontend%20Development/api/nats/#parameters_7","title":"Parameters","text":""},{"location":"Frontend%20Development/api/nats/#payload","title":"payload?","text":"<p><code>Payload</code></p>"},{"location":"Frontend%20Development/api/nats/#opts","title":"opts?","text":"<p><code>PublishOptions</code></p>"},{"location":"Frontend%20Development/api/nats/#returns_13","title":"Returns","text":"<p><code>boolean</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#string","title":"string()","text":"<pre><code>string(): string\n</code></pre> <p>Convenience method to parse the message payload as string. This method may throw an exception if there\u2019s a conversion error</p>"},{"location":"Frontend%20Development/api/nats/#returns_14","title":"Returns","text":"<p><code>string</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#msghdrs","title":"MsgHdrs","text":""},{"location":"Frontend%20Development/api/nats/#extends_1","title":"Extends","text":"<ul> <li><code>Iterable</code>&lt;[<code>string</code>, <code>string</code>[]]&gt;</li> </ul>"},{"location":"Frontend%20Development/api/nats/#properties_2","title":"Properties","text":""},{"location":"Frontend%20Development/api/nats/#code_3","title":"code","text":"<pre><code>code: number;\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#description","title":"description","text":"<pre><code>description: string;\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#haserror","title":"hasError","text":"<pre><code>hasError: boolean;\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#status","title":"status","text":"<pre><code>status: string;\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#methods_3","title":"Methods","text":""},{"location":"Frontend%20Development/api/nats/#iterator","title":"[iterator]()","text":"<pre><code>iterator: Iterator&lt;[string, string[]], any, any&gt;\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#returns_15","title":"Returns","text":"<p><code>Iterator</code>&lt;[<code>string</code>, <code>string</code>[]], <code>any</code>, <code>any</code>&gt;</p>"},{"location":"Frontend%20Development/api/nats/#inherited-from_4","title":"Inherited from","text":"<p><code>Iterable.[iterator]</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#append","title":"append()","text":"<pre><code>append(\n   k, \n   v, \n   match?): void\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#parameters_8","title":"Parameters","text":""},{"location":"Frontend%20Development/api/nats/#k","title":"k","text":"<p><code>string</code></p>"},{"location":"Frontend%20Development/api/nats/#v","title":"v","text":"<p><code>string</code></p>"},{"location":"Frontend%20Development/api/nats/#match","title":"match?","text":"<p><code>Match</code></p>"},{"location":"Frontend%20Development/api/nats/#returns_16","title":"Returns","text":"<p><code>void</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#delete","title":"delete()","text":"<pre><code>delete(k, match?): void\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#parameters_9","title":"Parameters","text":""},{"location":"Frontend%20Development/api/nats/#k_1","title":"k","text":"<p><code>string</code></p>"},{"location":"Frontend%20Development/api/nats/#match_1","title":"match?","text":"<p><code>Match</code></p>"},{"location":"Frontend%20Development/api/nats/#returns_17","title":"Returns","text":"<p><code>void</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#get","title":"get()","text":"<pre><code>get(k, match?): string\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#parameters_10","title":"Parameters","text":""},{"location":"Frontend%20Development/api/nats/#k_2","title":"k","text":"<p><code>string</code></p>"},{"location":"Frontend%20Development/api/nats/#match_2","title":"match?","text":"<p><code>Match</code></p>"},{"location":"Frontend%20Development/api/nats/#returns_18","title":"Returns","text":"<p><code>string</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#has","title":"has()","text":"<pre><code>has(k, match?): boolean\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#parameters_11","title":"Parameters","text":""},{"location":"Frontend%20Development/api/nats/#k_3","title":"k","text":"<p><code>string</code></p>"},{"location":"Frontend%20Development/api/nats/#match_3","title":"match?","text":"<p><code>Match</code></p>"},{"location":"Frontend%20Development/api/nats/#returns_19","title":"Returns","text":"<p><code>boolean</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#keys","title":"keys()","text":"<pre><code>keys(): string[]\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#returns_20","title":"Returns","text":"<p><code>string</code>[]</p> <p></p>"},{"location":"Frontend%20Development/api/nats/#last","title":"last()","text":"<pre><code>last(k, match?): string\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#parameters_12","title":"Parameters","text":""},{"location":"Frontend%20Development/api/nats/#k_4","title":"k","text":"<p><code>string</code></p>"},{"location":"Frontend%20Development/api/nats/#match_4","title":"match?","text":"<p><code>Match</code></p>"},{"location":"Frontend%20Development/api/nats/#returns_21","title":"Returns","text":"<p><code>string</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#set","title":"set()","text":"<pre><code>set(\n   k, \n   v, \n   match?): void\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#parameters_13","title":"Parameters","text":""},{"location":"Frontend%20Development/api/nats/#k_5","title":"k","text":"<p><code>string</code></p>"},{"location":"Frontend%20Development/api/nats/#v_1","title":"v","text":"<p><code>string</code></p>"},{"location":"Frontend%20Development/api/nats/#match_5","title":"match?","text":"<p><code>Match</code></p>"},{"location":"Frontend%20Development/api/nats/#returns_22","title":"Returns","text":"<p><code>void</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#values","title":"values()","text":"<pre><code>values(k, match?): string[]\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#parameters_14","title":"Parameters","text":""},{"location":"Frontend%20Development/api/nats/#k_6","title":"k","text":"<p><code>string</code></p>"},{"location":"Frontend%20Development/api/nats/#match_6","title":"match?","text":"<p><code>Match</code></p>"},{"location":"Frontend%20Development/api/nats/#returns_23","title":"Returns","text":"<p><code>string</code>[]</p> <p></p>"},{"location":"Frontend%20Development/api/nats/#natsconnection","title":"NatsConnection","text":""},{"location":"Frontend%20Development/api/nats/#properties_3","title":"Properties","text":""},{"location":"Frontend%20Development/api/nats/#info","title":"info?","text":"<pre><code>optional info: ServerInfo;\n</code></pre> <p>ServerInfo to the currently connected server or undefined</p> <p></p>"},{"location":"Frontend%20Development/api/nats/#services","title":"services","text":"<pre><code>services: ServicesAPI;\n</code></pre> <p>Returns a ServicesAPI which allows you to build services using NATS.</p>"},{"location":"Frontend%20Development/api/nats/#methods_4","title":"Methods","text":""},{"location":"Frontend%20Development/api/nats/#close","title":"close()","text":"<pre><code>close(): Promise&lt;void&gt;\n</code></pre> <p>Close will close the connection to the server. This call will terminate all pending requests and subscriptions. The returned promise resolves when the connection closes.</p>"},{"location":"Frontend%20Development/api/nats/#returns_24","title":"Returns","text":"<p><code>Promise</code>&lt;<code>void</code>&gt;</p> <p></p>"},{"location":"Frontend%20Development/api/nats/#closed","title":"closed()","text":"<pre><code>closed(): Promise&lt;void | Error&gt;\n</code></pre> <p>Returns a promise that can be used to monitor if the client closes. The promise can resolve an Error if the reason for the close was an error. Note that the promise doesn\u2019t reject, but rather resolves to the error if there was one.</p>"},{"location":"Frontend%20Development/api/nats/#returns_25","title":"Returns","text":"<p><code>Promise</code>&lt;<code>void</code> | <code>Error</code>&gt;</p> <p></p>"},{"location":"Frontend%20Development/api/nats/#drain","title":"drain()","text":"<pre><code>drain(): Promise&lt;void&gt;\n</code></pre> <p>Initiates a drain on the connection and returns a promise that resolves when the drain completes and the connection closes.</p> <p>Drain is an ordered shutdown of the client. Instead of abruptly closing the client, subscriptions are drained, that is messages not yet processed by a subscription are handled before the subscription is closed. After subscriptions are drained it is not possible to create a new subscription. Then all pending outbound messages are sent to the server. Finally, the connection is closed.</p>"},{"location":"Frontend%20Development/api/nats/#returns_26","title":"Returns","text":"<p><code>Promise</code>&lt;<code>void</code>&gt;</p> <p></p>"},{"location":"Frontend%20Development/api/nats/#flush","title":"flush()","text":"<pre><code>flush(): Promise&lt;void&gt;\n</code></pre> <p>Returns a Promise that resolves when the client receives a reply from the server. Use of this API is not necessary by clients.</p>"},{"location":"Frontend%20Development/api/nats/#returns_27","title":"Returns","text":"<p><code>Promise</code>&lt;<code>void</code>&gt;</p> <p></p>"},{"location":"Frontend%20Development/api/nats/#getserver","title":"getServer()","text":"<pre><code>getServer(): string\n</code></pre> <p>Returns the hostport of the server the client is connected to.</p>"},{"location":"Frontend%20Development/api/nats/#returns_28","title":"Returns","text":"<p><code>string</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#isclosed","title":"isClosed()","text":"<pre><code>isClosed(): boolean\n</code></pre> <p>Returns true if the client is closed.</p>"},{"location":"Frontend%20Development/api/nats/#returns_29","title":"Returns","text":"<p><code>boolean</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#isdraining","title":"isDraining()","text":"<pre><code>isDraining(): boolean\n</code></pre> <p>Returns true if the client is draining.</p>"},{"location":"Frontend%20Development/api/nats/#returns_30","title":"Returns","text":"<p><code>boolean</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#jetstream","title":"jetstream()","text":"<pre><code>jetstream(opts?): JetStreamClient\n</code></pre> <p>Returns a JetStreamClient which allows publishing messages to JetStream or consuming messages from streams.</p>"},{"location":"Frontend%20Development/api/nats/#parameters_15","title":"Parameters","text":""},{"location":"Frontend%20Development/api/nats/#opts_1","title":"opts?","text":"<p><code>JetStreamManagerOptions</code> | <code>JetStreamOptions</code></p>"},{"location":"Frontend%20Development/api/nats/#returns_31","title":"Returns","text":"<p><code>JetStreamClient</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#jetstreammanager","title":"jetstreamManager()","text":"<pre><code>jetstreamManager(opts?): Promise&lt;JetStreamManager&gt;\n</code></pre> <p>Returns a Promise to a JetStreamManager which allows the client to access Streams and Consumers information.</p>"},{"location":"Frontend%20Development/api/nats/#parameters_16","title":"Parameters","text":""},{"location":"Frontend%20Development/api/nats/#opts_2","title":"opts?","text":"<p><code>JetStreamManagerOptions</code></p>"},{"location":"Frontend%20Development/api/nats/#returns_32","title":"Returns","text":"<p><code>Promise</code>&lt;<code>JetStreamManager</code>&gt;</p> <p></p>"},{"location":"Frontend%20Development/api/nats/#publish","title":"publish()","text":"<pre><code>publish(\n   subject, \n   payload?, \n   options?): void\n</code></pre> <p>Publishes the specified data to the specified subject.</p>"},{"location":"Frontend%20Development/api/nats/#parameters_17","title":"Parameters","text":""},{"location":"Frontend%20Development/api/nats/#subject_2","title":"subject","text":"<p><code>string</code></p>"},{"location":"Frontend%20Development/api/nats/#payload_1","title":"payload?","text":"<p><code>Payload</code></p>"},{"location":"Frontend%20Development/api/nats/#options","title":"options?","text":"<p><code>PublishOptions</code></p>"},{"location":"Frontend%20Development/api/nats/#returns_33","title":"Returns","text":"<p><code>void</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#publishmessage","title":"publishMessage()","text":"<pre><code>publishMessage(msg): void\n</code></pre> <p>Publishes using the subject of the specified message, specifying the data, headers and reply found in the message if any.</p>"},{"location":"Frontend%20Development/api/nats/#parameters_18","title":"Parameters","text":""},{"location":"Frontend%20Development/api/nats/#msg_1","title":"msg","text":"<p><code>Msg</code></p>"},{"location":"Frontend%20Development/api/nats/#returns_34","title":"Returns","text":"<p><code>void</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#reconnect","title":"reconnect()","text":"<pre><code>reconnect(): Promise&lt;void&gt;\n</code></pre> <p>Use of this API is experimental, and it is subject to be removed.</p> <p>reconnect() enables a client to force a reconnect. A reconnect will disconnect the client, and possibly initiate a reconnect to the cluster.  Note that all reconnect caveats apply:</p> <ul> <li> <p>If the reconnection policy given to the client doesn\u2019t allow reconnects, the connection will close.</p> </li> <li> <p>Messages that are inbound or outbound could  be lost.</p> </li> <li> <p>All requests that are in flight will be rejected.</p> </li> </ul> <p>Note that the returned promise will reject if the client is already closed, or if it is in the process of draining. If the client is currently disconnected, this API has no effect, as the client is already attempting to reconnect.</p>"},{"location":"Frontend%20Development/api/nats/#returns_35","title":"Returns","text":"<p><code>Promise</code>&lt;<code>void</code>&gt;</p> <p></p>"},{"location":"Frontend%20Development/api/nats/#request","title":"request()","text":"<pre><code>request(\n   subject, \n   payload?, \nopts?): Promise&lt;Msg&gt;\n</code></pre> <p>Publishes a request with specified data in the specified subject expecting a response before RequestOptions#timeout milliseconds. The api returns a Promise that resolves when the first response to the request is received. If there are no responders (a subscription) listening on the request subject, the request will fail as soon as the server processes it.</p>"},{"location":"Frontend%20Development/api/nats/#parameters_19","title":"Parameters","text":""},{"location":"Frontend%20Development/api/nats/#subject_3","title":"subject","text":"<p><code>string</code></p>"},{"location":"Frontend%20Development/api/nats/#payload_2","title":"payload?","text":"<p><code>Payload</code></p>"},{"location":"Frontend%20Development/api/nats/#opts_3","title":"opts?","text":"<p><code>RequestOptions</code></p>"},{"location":"Frontend%20Development/api/nats/#returns_36","title":"Returns","text":"<p><code>Promise</code>&lt;<code>Msg</code>&gt;</p> <p></p>"},{"location":"Frontend%20Development/api/nats/#requestmany","title":"requestMany()","text":"<pre><code>requestMany(\n   subject, \n   payload?, \nopts?): Promise&lt;AsyncIterable&lt;Msg, any, any&gt;&gt;\n</code></pre> <p>Publishes a request expecting multiple responses back. Several strategies to determine when the request should stop gathering responses.</p>"},{"location":"Frontend%20Development/api/nats/#parameters_20","title":"Parameters","text":""},{"location":"Frontend%20Development/api/nats/#subject_4","title":"subject","text":"<p><code>string</code></p>"},{"location":"Frontend%20Development/api/nats/#payload_3","title":"payload?","text":"<p><code>Payload</code></p>"},{"location":"Frontend%20Development/api/nats/#opts_4","title":"opts?","text":"<p><code>Partial</code>&lt;<code>RequestManyOptions</code>&gt;</p>"},{"location":"Frontend%20Development/api/nats/#returns_37","title":"Returns","text":"<p><code>Promise</code>&lt;<code>AsyncIterable</code>&lt;<code>Msg</code>, <code>any</code>, <code>any</code>&gt;&gt;</p> <p></p>"},{"location":"Frontend%20Development/api/nats/#respondmessage","title":"respondMessage()","text":"<pre><code>respondMessage(msg): boolean\n</code></pre> <p>Replies using the reply subject of the specified message, specifying the data, headers in the message if any.</p>"},{"location":"Frontend%20Development/api/nats/#parameters_21","title":"Parameters","text":""},{"location":"Frontend%20Development/api/nats/#msg_2","title":"msg","text":"<p><code>Msg</code></p>"},{"location":"Frontend%20Development/api/nats/#returns_38","title":"Returns","text":"<p><code>boolean</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#rtt","title":"rtt()","text":"<pre><code>rtt(): Promise&lt;number&gt;\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#returns_39","title":"Returns","text":"<p><code>Promise</code>&lt;<code>number</code>&gt;</p> <p>the number of milliseconds it took for a flush.</p> <p></p>"},{"location":"Frontend%20Development/api/nats/#stats","title":"stats()","text":"<pre><code>stats(): Stats\n</code></pre> <p>Returns some metrics such as the number of messages and bytes sent and recieved by the client.</p>"},{"location":"Frontend%20Development/api/nats/#returns_40","title":"Returns","text":"<p><code>Stats</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#status_1","title":"status()","text":"<pre><code>status(): AsyncIterable&lt;Status, any, any&gt;\n</code></pre> <p>Returns an async iterator of Status that may be useful in understanding when the client looses a connection, or reconnects, or receives an update from the cluster among other things.</p>"},{"location":"Frontend%20Development/api/nats/#returns_41","title":"Returns","text":"<p><code>AsyncIterable</code>&lt;<code>Status</code>, <code>any</code>, <code>any</code>&gt;</p> <p>an AsyncIterable <p></p>"},{"location":"Frontend%20Development/api/nats/#subscribe","title":"subscribe()","text":"<pre><code>subscribe(subject, opts?): Subscription\n</code></pre> <p>Subscribe expresses interest in the specified subject. The subject may have wildcards. Messages are delivered to the SubscriptionOptions callback if specified. Otherwise, the subscription is an async iterator for Msg.</p>"},{"location":"Frontend%20Development/api/nats/#parameters_22","title":"Parameters","text":""},{"location":"Frontend%20Development/api/nats/#subject_5","title":"subject","text":"<p><code>string</code></p>"},{"location":"Frontend%20Development/api/nats/#opts_5","title":"opts?","text":"<p><code>SubscriptionOptions</code></p>"},{"location":"Frontend%20Development/api/nats/#returns_42","title":"Returns","text":"<p><code>Subscription</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#publishoptions","title":"PublishOptions","text":""},{"location":"Frontend%20Development/api/nats/#properties_4","title":"Properties","text":""},{"location":"Frontend%20Development/api/nats/#headers_1","title":"headers?","text":"<pre><code>optional headers: MsgHdrs;\n</code></pre> <p>Optional headers to include with the message.</p> <p></p>"},{"location":"Frontend%20Development/api/nats/#reply_1","title":"reply?","text":"<pre><code>optional reply: string;\n</code></pre> <p>An optional subject where a response should be sent. Note you must have a subscription listening on this subject to receive the response.</p> <p></p>"},{"location":"Frontend%20Development/api/nats/#requestoptions","title":"RequestOptions","text":""},{"location":"Frontend%20Development/api/nats/#properties_5","title":"Properties","text":""},{"location":"Frontend%20Development/api/nats/#headers_2","title":"headers?","text":"<pre><code>optional headers: MsgHdrs;\n</code></pre> <p>MsgHdrs to include with the request.</p> <p></p>"},{"location":"Frontend%20Development/api/nats/#nomux","title":"noMux?","text":"<pre><code>optional noMux: boolean;\n</code></pre> <p>If true, the request API will create a regular NATS subscription to process the response. Otherwise a shared muxed subscriptions is used. Requires reply</p> <p></p>"},{"location":"Frontend%20Development/api/nats/#reply_2","title":"reply?","text":"<pre><code>optional reply: string;\n</code></pre> <p>The subject where the response should be sent to. Requires noMux</p> <p></p>"},{"location":"Frontend%20Development/api/nats/#timeout","title":"timeout","text":"<pre><code>timeout: number;\n</code></pre> <p>number of milliseconds before the request will timeout.</p> <p></p>"},{"location":"Frontend%20Development/api/nats/#subt","title":"Sub&lt;T&gt;","text":"<p>Basic interface to a Subscription type</p>"},{"location":"Frontend%20Development/api/nats/#extends_2","title":"Extends","text":"<ul> <li><code>AsyncIterable</code>&lt;<code>T</code>&gt;</li> </ul>"},{"location":"Frontend%20Development/api/nats/#type-parameters_2","title":"Type Parameters","text":"<p>\u2022 T</p>"},{"location":"Frontend%20Development/api/nats/#properties_6","title":"Properties","text":""},{"location":"Frontend%20Development/api/nats/#closed_1","title":"closed","text":"<pre><code>closed: Promise&lt;void&gt;;\n</code></pre> <p>A promise that resolves when the subscription closes</p>"},{"location":"Frontend%20Development/api/nats/#methods_5","title":"Methods","text":""},{"location":"Frontend%20Development/api/nats/#asynciterator","title":"[asyncIterator]()","text":"<pre><code>asyncIterator: AsyncIterator&lt;T, any, any&gt;\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#returns_43","title":"Returns","text":"<p><code>AsyncIterator</code>&lt;<code>T</code>, <code>any</code>, <code>any</code>&gt;</p>"},{"location":"Frontend%20Development/api/nats/#inherited-from_5","title":"Inherited from","text":"<p><code>AsyncIterable.[asyncIterator]</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#drain_1","title":"drain()","text":"<pre><code>drain(): Promise&lt;void&gt;\n</code></pre> <p>Drain the subscription, closing it after processing all messages currently in flight for the client. Returns a promise that resolves when the subscription finished draining.</p>"},{"location":"Frontend%20Development/api/nats/#returns_44","title":"Returns","text":"<p><code>Promise</code>&lt;<code>void</code>&gt;</p> <p></p>"},{"location":"Frontend%20Development/api/nats/#getmax","title":"getMax()","text":"<pre><code>getMax(): undefined | number\n</code></pre> <p>Return the max number of messages before the subscription will unsubscribe.</p>"},{"location":"Frontend%20Development/api/nats/#returns_45","title":"Returns","text":"<p><code>undefined</code> | <code>number</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#getpending","title":"getPending()","text":"<pre><code>getPending(): number\n</code></pre> <p>Returns the number of messages that are pending processing. Note that this is method is only valid for iterators.</p>"},{"location":"Frontend%20Development/api/nats/#returns_46","title":"Returns","text":"<p><code>number</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#getprocessed","title":"getProcessed()","text":"<pre><code>getProcessed(): number\n</code></pre> <p>Returns the number of messages that have been processed by the subscription.</p>"},{"location":"Frontend%20Development/api/nats/#returns_47","title":"Returns","text":"<p><code>number</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#getreceived","title":"getReceived()","text":"<pre><code>getReceived(): number\n</code></pre> <p>Returns the number of messages received by the subscription.</p>"},{"location":"Frontend%20Development/api/nats/#returns_48","title":"Returns","text":"<p><code>number</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#getsubject","title":"getSubject()","text":"<pre><code>getSubject(): string\n</code></pre> <p>Returns the subject that was used to create the subscription.</p>"},{"location":"Frontend%20Development/api/nats/#returns_49","title":"Returns","text":"<p><code>string</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#isclosed_1","title":"isClosed()","text":"<pre><code>isClosed(): boolean\n</code></pre> <p>Returns true if the subscription is closed.</p>"},{"location":"Frontend%20Development/api/nats/#returns_50","title":"Returns","text":"<p><code>boolean</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#isdraining_1","title":"isDraining()","text":"<pre><code>isDraining(): boolean\n</code></pre> <p>Returns true if the subscription is draining.</p>"},{"location":"Frontend%20Development/api/nats/#returns_51","title":"Returns","text":"<p><code>boolean</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#unsubscribe","title":"unsubscribe()","text":"<pre><code>unsubscribe(max?): void\n</code></pre> <p>Stop the subscription from receiving messages. You can optionally specify that the subscription should stop after the specified number of messages have been received. Note this count is since the lifetime of the subscription.</p>"},{"location":"Frontend%20Development/api/nats/#parameters_23","title":"Parameters","text":""},{"location":"Frontend%20Development/api/nats/#max","title":"max?","text":"<p><code>number</code></p>"},{"location":"Frontend%20Development/api/nats/#returns_52","title":"Returns","text":"<p><code>void</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#suboptst","title":"SubOpts&lt;T&gt;","text":"<p>Subscription Options</p>"},{"location":"Frontend%20Development/api/nats/#type-parameters_3","title":"Type Parameters","text":"<p>\u2022 T</p>"},{"location":"Frontend%20Development/api/nats/#properties_7","title":"Properties","text":""},{"location":"Frontend%20Development/api/nats/#callback","title":"callback()?","text":"<pre><code>optional callback: (err, msg) =&gt; void;\n</code></pre> <p>An optional function that will handle messages. Typically, messages are processed via an async iterator on the subscription. If this option is provided, messages are processed by the specified function.</p>"},{"location":"Frontend%20Development/api/nats/#parameters_24","title":"Parameters","text":""},{"location":"Frontend%20Development/api/nats/#err_1","title":"err","text":"<p><code>null</code> | <code>NatsError</code></p>"},{"location":"Frontend%20Development/api/nats/#msg_3","title":"msg","text":"<p><code>T</code></p>"},{"location":"Frontend%20Development/api/nats/#returns_53","title":"Returns","text":"<p><code>void</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#max_1","title":"max?","text":"<pre><code>optional max: number;\n</code></pre> <p>Optional maximum number of messages to deliver to the subscription before it is auto-unsubscribed.</p> <p></p>"},{"location":"Frontend%20Development/api/nats/#queue_1","title":"queue?","text":"<pre><code>optional queue: string;\n</code></pre> <p>Optional queue name (subscriptions on the same subject that use queues are horizontally load balanced when part of the same queue).</p> <p></p>"},{"location":"Frontend%20Development/api/nats/#timeout_1","title":"timeout?","text":"<pre><code>optional timeout: number;\n</code></pre> <p>Optional maximum number of milliseconds before a timer raises an error. This useful to monitor a subscription that is expected to yield messages. The timer is cancelled when the first message is received by the subscription.</p>"},{"location":"Frontend%20Development/api/nats/#type-aliases","title":"Type Aliases","text":""},{"location":"Frontend%20Development/api/nats/#msgrequest","title":"MsgRequest","text":"<pre><code>type MsgRequest: SeqMsgRequest | LastForMsgRequest | number;\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#subscription","title":"Subscription","text":"<pre><code>type Subscription: Sub&lt;Msg&gt;;\n</code></pre> <p>Type alias for NATS core subscriptions</p> <p></p>"},{"location":"Frontend%20Development/api/nats/#subscriptionoptions","title":"SubscriptionOptions","text":"<pre><code>type SubscriptionOptions: SubOpts&lt;Msg&gt;;\n</code></pre> <p>Subscription Options</p>"},{"location":"Frontend%20Development/api/nats/#functions","title":"Functions","text":""},{"location":"Frontend%20Development/api/nats/#headers_3","title":"headers()","text":"<pre><code>function headers(code?, description?): MsgHdrs\n</code></pre>"},{"location":"Frontend%20Development/api/nats/#parameters_25","title":"Parameters","text":""},{"location":"Frontend%20Development/api/nats/#code_4","title":"code?","text":"<p><code>number</code></p>"},{"location":"Frontend%20Development/api/nats/#description_1","title":"description?","text":"<p><code>string</code></p>"},{"location":"Frontend%20Development/api/nats/#returns_54","title":"Returns","text":"<p><code>MsgHdrs</code></p> <p></p>"},{"location":"Frontend%20Development/api/nats/#stringcodec","title":"StringCodec()","text":"<pre><code>function StringCodec(): Codec&lt;string&gt;\n</code></pre> <p>Returns a Codec for encoding strings to a message payload and decoding message payloads into strings.</p>"},{"location":"Frontend%20Development/api/nats/#returns_55","title":"Returns","text":"<p><code>Codec</code>&lt;<code>string</code>&gt;</p>"},{"location":"Frontend%20Development/api/nats/#references","title":"References","text":""},{"location":"Frontend%20Development/api/nats/#jsoncodec","title":"JSONCodec","text":"<p>Re-exports JSONCodec</p>"},{"location":"Frontend%20Development/api/user-data/","title":"User data","text":"<p>Types and utilities for interacting with the user data stored on the user\u2019s device.</p>"},{"location":"Frontend%20Development/api/user-data/#example","title":"Example","text":"<pre><code>import { ... } from '@wuespace/telestion/user-data';\n</code></pre>"},{"location":"Frontend%20Development/api/user-data/#type-aliases","title":"Type Aliases","text":""},{"location":"Frontend%20Development/api/user-data/#dashboard","title":"Dashboard","text":"<pre><code>type Dashboard: object;\n</code></pre> <p><code>Alpha</code></p> <p>Represents a dashboard.</p>"},{"location":"Frontend%20Development/api/user-data/#type-declaration","title":"Type declaration","text":""},{"location":"Frontend%20Development/api/user-data/#layout","title":"layout","text":"<pre><code>layout: string[][] = layoutSchema;\n</code></pre> <p>The layout of the dashboard.</p> <p></p>"},{"location":"Frontend%20Development/api/user-data/#title","title":"title","text":"<pre><code>title: string;\n</code></pre> <p>The title of the dashboard.</p>"},{"location":"Frontend%20Development/api/user-data/#see","title":"See","text":"<p>dashboardSchema</p> <p></p>"},{"location":"Frontend%20Development/api/user-data/#widgetinstance","title":"WidgetInstance","text":"<pre><code>type WidgetInstance: object;\n</code></pre> <p>Represents a widget instance.</p>"},{"location":"Frontend%20Development/api/user-data/#type-declaration_1","title":"Type declaration","text":""},{"location":"Frontend%20Development/api/user-data/#configuration","title":"configuration","text":"<pre><code>configuration: Record&lt;string, Json&gt;;\n</code></pre> <p>The configuration of the widget.</p> <p></p>"},{"location":"Frontend%20Development/api/user-data/#type","title":"type","text":"<pre><code>type: string;\n</code></pre> <p>The type ID of the widget.</p> <p>This is used to determine which widget type to use to render the widget.</p>"},{"location":"Frontend%20Development/api/user-data/#see_1","title":"See","text":"<p>Widget.id</p>"},{"location":"Frontend%20Development/api/user-data/#see_2","title":"See","text":"<p>widgetInstanceSchema</p>"},{"location":"Frontend%20Development/api/user-data/#variables","title":"Variables","text":""},{"location":"Frontend%20Development/api/user-data/#dashboardschema","title":"dashboardSchema","text":"<pre><code>const dashboardSchema: ZodObject&lt;Dashboard&gt;;\n</code></pre> <p>Represents the schema for a dashboard.</p> <p></p>"},{"location":"Frontend%20Development/api/user-data/#idschema","title":"idSchema","text":"<pre><code>const idSchema: ZodString;\n</code></pre> <p>A regular expression that matches valid identifiers.</p> <p>Used for dashboard and widget instance IDs.</p>"},{"location":"Frontend%20Development/api/user-data/#see_3","title":"See","text":"<p>WidgetInstance</p> <p></p>"},{"location":"Frontend%20Development/api/user-data/#jsonschema","title":"jsonSchema","text":"<pre><code>const jsonSchema: z.ZodType&lt;Json&gt;;\n</code></pre>"},{"location":"Frontend%20Development/api/user-data/#layoutschema","title":"layoutSchema","text":"<pre><code>const layoutSchema: ZodArray&lt;ZodArray&lt;ZodUnion&lt;[ZodString, ZodLiteral&lt;\".\"&gt;]&gt;, \"many\"&gt;, \"many\"&gt;;\n</code></pre> <p>A schema that matches valid layout configurations.</p> <p></p>"},{"location":"Frontend%20Development/api/user-data/#semverregexp","title":"semverRegExp","text":"<pre><code>const semverRegExp: RegExp;\n</code></pre> <p>A regular expression that matches semantic version numbers.</p> <p>Taken from https://semver.org/#is-there-a-suggested-regular-expression-regex-to-check-a-semver-string</p> <p></p>"},{"location":"Frontend%20Development/api/user-data/#userdataschema","title":"userDataSchema","text":"<pre><code>const userDataSchema: ZodObject&lt;UserData&gt;;\n</code></pre> <p>The schema for the user data.</p>"},{"location":"Frontend%20Development/api/user-data/#see_4","title":"See","text":"<p>UserData</p> <p></p>"},{"location":"Frontend%20Development/api/user-data/#widgetinstanceschema","title":"widgetInstanceSchema","text":"<pre><code>const widgetInstanceSchema: ZodObject&lt;WidgetInstance&gt;;\n</code></pre> <p>Represents the schema for a widget instance.</p>"},{"location":"Frontend%20Development/api/user-data/#see_5","title":"See","text":"<p>WidgetInstance</p>"},{"location":"Frontend%20Development/api/user-data/#functions","title":"Functions","text":""},{"location":"Frontend%20Development/api/user-data/#getblankuserdata","title":"getBlankUserData()","text":"<pre><code>function getBlankUserData(version): UserData\n</code></pre> <p>Returns a new blank user data object.</p>"},{"location":"Frontend%20Development/api/user-data/#parameters","title":"Parameters","text":""},{"location":"Frontend%20Development/api/user-data/#version","title":"version","text":"<p><code>string</code></p> <p>the current application version</p>"},{"location":"Frontend%20Development/api/user-data/#returns","title":"Returns","text":"<p><code>UserData</code></p> <p></p>"},{"location":"Frontend%20Development/api/user-data/#getemptydashboard","title":"getEmptyDashboard()","text":"<pre><code>function getEmptyDashboard(): readonly [string, Dashboard]\n</code></pre> <p>Returns a new and empty dashboard with a unique id.</p>"},{"location":"Frontend%20Development/api/user-data/#returns_1","title":"Returns","text":"<p>readonly [<code>string</code>, <code>Dashboard</code>]</p> <p></p>"},{"location":"Frontend%20Development/api/user-data/#getuserdata","title":"getUserData()","text":"<pre><code>function getUserData(): undefined | {\n  dashboards: Record&lt;string, {\n     layout: string[][];\n     title: string;\n    }&gt;;\n  version: string;\n  widgetInstances: Record&lt;string, {\n     configuration: Record&lt;string, Json&gt;;\n     type: string;\n    }&gt;;\n}\n</code></pre> <p>Retrieves user data from local storage.</p>"},{"location":"Frontend%20Development/api/user-data/#returns_2","title":"Returns","text":"<p><code>undefined</code> | {   <code>dashboards</code>: <code>Record</code>&lt;<code>string</code>, {      <code>layout</code>: <code>string</code>[][];      <code>title</code>: <code>string</code>;     }&gt;;   <code>version</code>: <code>string</code>;   <code>widgetInstances</code>: <code>Record</code>&lt;<code>string</code>, {      <code>configuration</code>: <code>Record</code>&lt;<code>string</code>, <code>Json</code>&gt;;      <code>type</code>: <code>string</code>;     }&gt;;  }</p> <p>The user data if found in local storage, otherwise undefined.</p> <p></p>"},{"location":"Frontend%20Development/api/user-data/#removeuserdata","title":"removeUserData()","text":"<pre><code>function removeUserData(): void\n</code></pre> <p>Removes the user data from local storage.</p>"},{"location":"Frontend%20Development/api/user-data/#returns_3","title":"Returns","text":"<p><code>void</code></p> <p></p>"},{"location":"Frontend%20Development/api/user-data/#setuserdata","title":"setUserData()","text":"<pre><code>function setUserData(newUserData): void\n</code></pre> <p>Sets the user data in the local storage based on the given input.</p>"},{"location":"Frontend%20Development/api/user-data/#parameters_1","title":"Parameters","text":""},{"location":"Frontend%20Development/api/user-data/#newuserdata","title":"newUserData","text":"<p>The new user data to be set.</p>"},{"location":"Frontend%20Development/api/user-data/#dashboards","title":"dashboards","text":"<p><code>Record</code>&lt;<code>string</code>, {   <code>layout</code>: <code>string</code>[][];   <code>title</code>: <code>string</code>;  }&gt; = <code>...</code></p> <p>The user\u2019s dashboards.</p>"},{"location":"Frontend%20Development/api/user-data/#version_1","title":"version","text":"<p><code>string</code> = <code>...</code></p> <p>The version of the client that created this user data.</p>"},{"location":"Frontend%20Development/api/user-data/#widgetinstances","title":"widgetInstances","text":"<p><code>Record</code>&lt;<code>string</code>, {   <code>configuration</code>: <code>Record</code>&lt;<code>string</code>, <code>Json</code>&gt;;   <code>type</code>: <code>string</code>;  }&gt; = <code>...</code></p> <p>The user\u2019s widget instances.</p>"},{"location":"Frontend%20Development/api/user-data/#returns_4","title":"Returns","text":"<p><code>void</code></p>"},{"location":"Frontend%20Development/api/user-data/#references","title":"References","text":""},{"location":"Frontend%20Development/api/user-data/#userdata","title":"UserData","text":"<p>Re-exports UserData</p>"},{"location":"Frontend%20Development/api/utils/","title":"Utils","text":"<p>Various utility functions around building Telestion frontend apps.</p>"},{"location":"Frontend%20Development/api/utils/#example","title":"Example","text":"<pre><code>import { ... } from '@wuespace/telestion/utils';\n</code></pre>"},{"location":"Frontend%20Development/api/utils/#functions","title":"Functions","text":""},{"location":"Frontend%20Development/api/utils/#generatedashboardid","title":"generateDashboardId()","text":"<pre><code>function generateDashboardId(): string\n</code></pre> <p>Generates a unique identifier for a dashboard.</p>"},{"location":"Frontend%20Development/api/utils/#returns","title":"Returns","text":"<p><code>string</code></p> <p>The generated dashboard identifier.</p> <p></p>"},{"location":"Frontend%20Development/api/utils/#isuserdatauptodate","title":"isUserDataUpToDate()","text":"<pre><code>function isUserDataUpToDate(userData, currentVersion): boolean\n</code></pre> <p>Checks if the user data is up-to-date with the current version of the application.</p>"},{"location":"Frontend%20Development/api/utils/#parameters","title":"Parameters","text":""},{"location":"Frontend%20Development/api/utils/#userdata","title":"userData","text":"<p>the user data to compare with the application version</p> <p><code>undefined</code> |</p> <p>{ <code>dashboards</code>: <code>Record</code>&lt;<code>string</code>, { <code>layout</code>: <code>string</code>[][]; <code>title</code>: <code>string</code>; }&gt;; <code>version</code>: <code>string</code>; <code>widgetInstances</code>: <code>Record</code>&lt;<code>string</code>, { <code>configuration</code>: <code>Record</code>&lt;<code>string</code>, <code>Json</code>&gt;; <code>type</code>: <code>string</code>; }&gt;; }</p> <p>the user data to compare with the application version</p>"},{"location":"Frontend%20Development/api/utils/#dashboards","title":"dashboards","text":"<p><code>Record</code>&lt;<code>string</code>, { <code>layout</code>: <code>string</code>[][]; <code>title</code>: <code>string</code>; }&gt; = <code>...</code></p> <p>The user\u2019s dashboards.</p>"},{"location":"Frontend%20Development/api/utils/#version","title":"version","text":"<p><code>string</code> = <code>...</code></p> <p>The version of the client that created this user data.</p>"},{"location":"Frontend%20Development/api/utils/#widgetinstances","title":"widgetInstances","text":"<p><code>Record</code>&lt;<code>string</code>, { <code>configuration</code>: <code>Record</code>&lt;<code>string</code>, <code>Json</code>&gt;; <code>type</code>: <code>string</code>; }&gt; = <code>...</code></p> <p>The user\u2019s widget instances.</p>"},{"location":"Frontend%20Development/api/utils/#currentversion","title":"currentVersion","text":"<p><code>string</code></p> <p>the current version of the application</p>"},{"location":"Frontend%20Development/api/utils/#returns_1","title":"Returns","text":"<p><code>boolean</code></p> <p></p>"},{"location":"Frontend%20Development/api/utils/#loadfilecontents","title":"loadFileContents()","text":"<pre><code>function loadFileContents(file, encoding): Promise&lt;string&gt;\n</code></pre> <p>Loads the contents of a specified file.</p>"},{"location":"Frontend%20Development/api/utils/#parameters_1","title":"Parameters","text":""},{"location":"Frontend%20Development/api/utils/#file","title":"file","text":"<p><code>File</code></p> <p>The file object to load contents from.</p>"},{"location":"Frontend%20Development/api/utils/#encoding","title":"encoding","text":"<p><code>string</code> = <code>'utf-8'</code></p> <p>The encoding to use while reading the file. Default is UTF-8.</p>"},{"location":"Frontend%20Development/api/utils/#returns_2","title":"Returns","text":"<p><code>Promise</code>&lt;<code>string</code>&gt;</p> <ul> <li>A Promise that resolves with the contents of the file as a string.          - If the file is empty, the Promise will be rejected with an error.</li> </ul> <p></p>"},{"location":"Frontend%20Development/api/utils/#wait","title":"wait()","text":"<pre><code>function wait(timeout): Promise&lt;void&gt;\n</code></pre> <p><code>Internal</code></p> <p>Waits for the specified amount of time before resolving the returned promise.</p>"},{"location":"Frontend%20Development/api/utils/#parameters_2","title":"Parameters","text":""},{"location":"Frontend%20Development/api/utils/#timeout","title":"timeout","text":"<p><code>number</code></p> <p>The duration in milliseconds to wait before resolving.</p>"},{"location":"Frontend%20Development/api/utils/#returns_3","title":"Returns","text":"<p><code>Promise</code>&lt;<code>void</code>&gt;</p> <p>A promise that resolves after the specified time has elapsed.</p>"},{"location":"Frontend%20Development/api/widget/","title":"Widget","text":"<p>Everything you need for building and/or displaying widgets.</p>"},{"location":"Frontend%20Development/api/widget/#example","title":"Example","text":"<pre><code>import { ... } from '@wuespace/telestion/widget';\n</code></pre>"},{"location":"Frontend%20Development/api/widget/#interfaces","title":"Interfaces","text":""},{"location":"Frontend%20Development/api/widget/#widgetrendererprops","title":"WidgetRendererProps","text":""},{"location":"Frontend%20Development/api/widget/#properties","title":"Properties","text":""},{"location":"Frontend%20Development/api/widget/#widgetinstanceid","title":"widgetInstanceId","text":"<pre><code>widgetInstanceId: string;\n</code></pre>"},{"location":"Frontend%20Development/api/widget/#type-aliases","title":"Type Aliases","text":""},{"location":"Frontend%20Development/api/widget/#basewidgetconfiguration","title":"BaseWidgetConfiguration","text":"<pre><code>type BaseWidgetConfiguration: Record&lt;string, Json&gt;;\n</code></pre> <p>The base type for all widget configurations.</p> <p>A JSON object that contains JSON-serializable values under string keys.</p>"},{"location":"Frontend%20Development/api/widget/#functions","title":"Functions","text":""},{"location":"Frontend%20Development/api/widget/#getwidgetbyid","title":"getWidgetById()","text":"<pre><code>function getWidgetById(id): undefined | Widget&lt;Record&lt;string, Json&gt;&gt;\n</code></pre> <p>Retrieves a widget by its unique type ID.</p>"},{"location":"Frontend%20Development/api/widget/#parameters","title":"Parameters","text":""},{"location":"Frontend%20Development/api/widget/#id","title":"id","text":"<p><code>string</code></p> <p>The unique type ID of the widget.</p>"},{"location":"Frontend%20Development/api/widget/#returns","title":"Returns","text":"<p><code>undefined</code> | <code>Widget</code>&lt;<code>Record</code>&lt;<code>string</code>, <code>Json</code>&gt;&gt;</p> <p>The widget associated with the ID, or null if the widget is not found.</p> <p></p>"},{"location":"Frontend%20Development/api/widget/#getwidgets","title":"getWidgets()","text":"<pre><code>function getWidgets(): Widget&lt;Record&lt;string, Json&gt;&gt;[]\n</code></pre> <p>Returns an array of all the widgets that are currently registered.</p>"},{"location":"Frontend%20Development/api/widget/#returns_1","title":"Returns","text":"<p><code>Widget</code>&lt;<code>Record</code>&lt;<code>string</code>, <code>Json</code>&gt;&gt;[]</p> <p>An array containing all the widgets.</p> <p></p>"},{"location":"Frontend%20Development/api/widget/#useconfigurewidget","title":"useConfigureWidget()","text":"<pre><code>function useConfigureWidget(): readonly [Record&lt;string, Json&gt;, (s) =&gt; void]\n</code></pre> <p>Similar to <code>useState</code> but for widget configurations.</p> <p>Only works inside a widget configuration context. Values returned and passed into the setter are always validated and transformed by the widget\u2019s Widget.createConfig function.</p>"},{"location":"Frontend%20Development/api/widget/#returns_2","title":"Returns","text":"<p>readonly [<code>Record</code>&lt;<code>string</code>, <code>Json</code>&gt;, (<code>s</code>) =&gt; <code>void</code>]</p> <p>the current widget configuration and a function to update it</p> <p></p>"},{"location":"Frontend%20Development/api/widget/#useconfigurewidgetfield","title":"useConfigureWidgetField()","text":"<pre><code>function useConfigureWidgetField&lt;T&gt;(name, validator): readonly [T, (newValue) =&gt; void]\n</code></pre> <p>A hook to get and set a specific field of the current widget configuration.</p> <p>Only works inside a widget configuration context. Values returned and passed into the setter are always validated and transformed by the widget\u2019s Widget.createConfig function.</p> <p>To validate the type of the individual field, the <code>validator</code> function is used.</p>"},{"location":"Frontend%20Development/api/widget/#type-parameters","title":"Type Parameters","text":"<p>\u2022 T extends <code>Json</code></p>"},{"location":"Frontend%20Development/api/widget/#parameters_1","title":"Parameters","text":""},{"location":"Frontend%20Development/api/widget/#name","title":"name","text":"<p><code>string</code></p> <p>the name of the field to get and set</p>"},{"location":"Frontend%20Development/api/widget/#validator","title":"validator","text":"<p>(<code>v</code>) =&gt; <code>T</code></p> <p>a function to validate the type of the field</p>"},{"location":"Frontend%20Development/api/widget/#returns_3","title":"Returns","text":"<p>readonly [<code>T</code>, (<code>newValue</code>) =&gt; <code>void</code>]</p> <p>the current value of the field and a function to update it</p>"},{"location":"Frontend%20Development/api/widget/#see","title":"See","text":"<p>useConfigureWidget</p>"},{"location":"Frontend%20Development/api/widget/#throws","title":"Throws","text":"<p>Error - if the field does not exist in the widget configuration</p>"},{"location":"Frontend%20Development/api/widget/#throws_1","title":"Throws","text":"<p>Error - if the type of the field does not match the validator</p>"},{"location":"Frontend%20Development/api/widget/#example_1","title":"Example","text":"<pre><code>// Config: { text: string }\nconst [text, setText] = useConfigureWidgetField('text', s =&gt; z.string().parse(s));\n\nreturn &lt;input value={text} onChange={e =&gt; setText(e.target.value)} /&gt;;\n</code></pre>"},{"location":"Frontend%20Development/api/widget/#widgetconfigcheckboxfield","title":"WidgetConfigCheckboxField()","text":"<pre><code>function WidgetConfigCheckboxField(props): Element\n</code></pre> <p>A checkbox field for the widget configuration.</p>"},{"location":"Frontend%20Development/api/widget/#parameters_2","title":"Parameters","text":""},{"location":"Frontend%20Development/api/widget/#props","title":"props","text":"<p>the props for the checkbox field</p>"},{"location":"Frontend%20Development/api/widget/#label","title":"label","text":"<p><code>string</code></p>"},{"location":"Frontend%20Development/api/widget/#name_1","title":"name","text":"<p><code>string</code></p>"},{"location":"Frontend%20Development/api/widget/#returns_4","title":"Returns","text":"<p><code>Element</code></p>"},{"location":"Frontend%20Development/api/widget/#example_2","title":"Example","text":"<pre><code>// Config: { enabled: boolean }\nconfigElement: &lt;WidgetConfigWrapper&gt;\n  &lt;WidgetConfigCheckboxField label={'Enabled'} name={'enabled'} /&gt;\n&lt;/WidgetConfigWrapper&gt;\n</code></pre>"},{"location":"Frontend%20Development/api/widget/#see_1","title":"See","text":"<p>Widget.configElement</p> <p></p>"},{"location":"Frontend%20Development/api/widget/#widgetconfigcontext","title":"WidgetConfigContext()","text":"<pre><code>function WidgetConfigContext(props): ReactNode\n</code></pre>"},{"location":"Frontend%20Development/api/widget/#parameters_3","title":"Parameters","text":""},{"location":"Frontend%20Development/api/widget/#props_1","title":"props","text":"<p><code>ProviderProps</code>&lt;<code>unknown</code>&gt;</p>"},{"location":"Frontend%20Development/api/widget/#returns_5","title":"Returns","text":"<p><code>ReactNode</code></p> <p></p>"},{"location":"Frontend%20Development/api/widget/#widgetconfigtextfield","title":"WidgetConfigTextField()","text":"<pre><code>function WidgetConfigTextField(props): Element\n</code></pre> <p>A text field for the widget configuration.</p>"},{"location":"Frontend%20Development/api/widget/#parameters_4","title":"Parameters","text":""},{"location":"Frontend%20Development/api/widget/#props_2","title":"props","text":"<p>the props for the text field</p>"},{"location":"Frontend%20Development/api/widget/#label_1","title":"label","text":"<p><code>string</code></p>"},{"location":"Frontend%20Development/api/widget/#name_2","title":"name","text":"<p><code>string</code></p>"},{"location":"Frontend%20Development/api/widget/#returns_6","title":"Returns","text":"<p><code>Element</code></p>"},{"location":"Frontend%20Development/api/widget/#example_3","title":"Example","text":"<pre><code>// Config: { text: string }\nconfigElement: &lt;WidgetConfigWrapper&gt;\n  &lt;WidgetConfigTextField label={'Text'} name={'text'} /&gt;\n&lt;/WidgetConfigWrapper&gt;\n</code></pre>"},{"location":"Frontend%20Development/api/widget/#see_2","title":"See","text":"<p>Widget.configElement</p> <p></p>"},{"location":"Frontend%20Development/api/widget/#widgetconfigwrapper","title":"WidgetConfigWrapper()","text":"<pre><code>function WidgetConfigWrapper(__namedParameters): Element\n</code></pre> <p>Wraps the widget configuration controls and gives them the correct margins.</p> <p>Should be used inside the widget configuration element.</p>"},{"location":"Frontend%20Development/api/widget/#parameters_5","title":"Parameters","text":""},{"location":"Frontend%20Development/api/widget/#__namedparameters","title":"__namedParameters","text":""},{"location":"Frontend%20Development/api/widget/#children","title":"children","text":"<p><code>ReactNode</code></p>"},{"location":"Frontend%20Development/api/widget/#returns_7","title":"Returns","text":"<p><code>Element</code></p>"},{"location":"Frontend%20Development/api/widget/#see_3","title":"See","text":"<p>Widget.configElement</p> <p></p>"},{"location":"Frontend%20Development/api/widget/#widgetrenderer","title":"WidgetRenderer()","text":"<pre><code>function WidgetRenderer(WidgetRendererProps): Element\n</code></pre> <p>Renders a widget based on the provided widgetInstanceId.</p>"},{"location":"Frontend%20Development/api/widget/#parameters_6","title":"Parameters","text":""},{"location":"Frontend%20Development/api/widget/#widgetrendererprops_1","title":"WidgetRendererProps","text":"<p><code>WidgetRendererProps</code></p> <p>The props for the WidgetRenderer.</p>"},{"location":"Frontend%20Development/api/widget/#returns_8","title":"Returns","text":"<p><code>Element</code></p> <p>The rendered widget.</p>"},{"location":"Frontend%20Development/api/widget/#throws_2","title":"Throws","text":"<p>Error If the widget instance is not found.</p>"},{"location":"Frontend%20Development/api/widget/#references","title":"References","text":""},{"location":"Frontend%20Development/api/widget/#registerwidgets","title":"registerWidgets","text":"<p>Re-exports registerWidgets</p> <p></p>"},{"location":"Frontend%20Development/api/widget/#widget","title":"Widget","text":"<p>Re-exports Widget</p>"},{"location":"_writers-guide/","title":"Writer\u2019s Guide","text":""},{"location":"_writers-guide/#introduction","title":"Introduction","text":"<p>This guide is intended to help you write documentation.</p>"},{"location":"_writers-guide/#writing-style","title":"Writing Style","text":""},{"location":"_writers-guide/#general","title":"General","text":"<ul> <li>Use the active voice.</li> <li>Use the present tense.</li> <li>Use the second person.</li> <li>Use the imperative mood.</li> <li>Use they/them/their as singular pronouns.</li> </ul>"},{"location":"_writers-guide/#markdown","title":"Markdown","text":""},{"location":"_writers-guide/#general_1","title":"General","text":"<ul> <li>Use the GitHub Flavored Markdown syntax.</li> <li>Use the CommonMark specification.</li> </ul>"},{"location":"_writers-guide/#headings","title":"Headings","text":"<ul> <li>Use <code>#</code> for headings.</li> <li>Use <code>##</code> for subheadings.</li> <li>Use <code>###</code> for sub-subheadings.</li> </ul>"},{"location":"_writers-guide/#lists","title":"Lists","text":"<ul> <li>Use <code>*</code> for unordered lists.</li> <li>Use <code>1.</code> for ordered lists.</li> <li>Use <code>*</code> for nested unordered lists.</li> <li>Use <code>1.</code> for nested ordered lists.</li> </ul>"},{"location":"_writers-guide/#links","title":"Links","text":"<ul> <li>Use <code>[text](url)</code> for links.</li> </ul>"},{"location":"_writers-guide/#internal-links","title":"Internal Links","text":"<ul> <li>Use relative links for internal links.</li> <li>Use the <code>.md</code> extension for internal links.</li> <li>Use the <code>#</code> symbol for internal links to (sub-) headings.</li> </ul> <p>Example</p> <pre><code>[Telestion Website](https://telestion.wuespace.de)\n\n[Deployment Pre-requisites](Deployment/prerequesites.md)\n\n[Deployment Pre-requisites](Deployment/prerequesites.md#deployment-pre-requisites)\n</code></pre>"},{"location":"_writers-guide/#images","title":"Images","text":"<ul> <li>Use <code>![alt text](url)</code> for images.</li> <li>Write the alt text in sentence case.</li> <li>Place images close to the text that references them.</li> <li>Use the PNG format for images.</li> <li>Use the SVG format for logos and icons.</li> <li>Use the JPEG format for photographs.</li> <li>Use the GIF format for animations.</li> </ul> <p>For images that can be inverted for the dark theme, use the following syntax:</p> <pre><code>![alt text](url){ .invertible }\n</code></pre> <p>To add a caption to an image, use the following syntax:</p> <pre><code>&lt;figure markdown&gt;\n![alt text](url)\n&lt;figcaption&gt;Image caption&lt;/figcaption&gt;\n&lt;/figure&gt;\n</code></pre> <p>Example</p> <pre><code>![alt text](url)\n\n![alt text](url){ .invertible }\n\n&lt;figure markdown&gt;\n![alt text](url)\n&lt;figcaption&gt;Image caption&lt;/figcaption&gt;\n&lt;/figure&gt;\n</code></pre>"},{"location":"_writers-guide/#code-blocks","title":"Code Blocks","text":"<ul> <li>Use <code>```</code> for code blocks.</li> <li>Use <code>```language</code> for code blocks with syntax highlighting.</li> <li>Use <code>```language title=\"name\"</code> for code blocks with syntax highlighting and a title.</li> </ul> <p>Example</p> <pre><code>```java\npublic static void main(String[] args) {\n    System.out.println(\"Hello World!\");\n}\n```\n\n```java title=\"Hello World\"\npublic static void main(String[] args) {\n    System.out.println(\"Hello World!\");\n}\n```\n</code></pre>"},{"location":"_writers-guide/#admonitions","title":"Admonitions","text":"<ul> <li>Use <code>!!! note</code> for notes.</li> <li>Use <code>!!! tip</code> for tips.</li> <li>Use <code>!!! warning</code> for warnings.</li> <li>Use <code>!!! danger</code> for dangers.</li> <li>Use <code>!!! example</code> for examples.</li> <li>Use <code>!!! question</code> for questions.</li> </ul> <p>Example</p> <pre><code>!!! note\n    This is a note.\n\n!!! tip\n    This is a tip.\n\n!!! warning\n    This is a warning.\n\n!!! danger\n    This is a danger.\n\n!!! example\n    This is an example.\n\n!!! question\n    This is a question.\n</code></pre>"},{"location":"_writers-guide/#keyboard-shortcuts","title":"Keyboard Shortcuts","text":"<ul> <li>Use <code>++</code> for keyboard shortcuts.</li> <li>Use <code>++ctrl+f++</code> for keyboard shortcuts with multiple keys.</li> <li>Use lowercase letters for keyboard shortcuts.</li> </ul> <p>Example</p> <p>Press Ctrl+F to open the menu.</p> <pre><code>Press ++ctrl+f++ to open the menu.\n</code></pre>"}]}